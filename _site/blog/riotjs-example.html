<!DOCTYPE html>
<html lang="en">
  <head>
    <title>RiotJS Example</title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1">
    <meta name="google-site-verification" content="QX4bn65yOXBfgnwxlO09yIBc1H8blur-Erx3lmsDVhU">
    <meta name="description" content="A quick-dive in to RiotJS, with examples.">

    <meta property="og:site_name" content="RobertWPearce.com">
    <meta property="og:url" content="http://robertwpearce.com//blog/riotjs-example.html">
    <meta property="og:description" content="A quick-dive in to RiotJS, with examples.">
    <meta property="og:image" content="">
    <meta property="og:type" content="article">

    <link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/css/app.css">
    <!--<link rel="canonical" href="http://www.robertwpearce.com/">-->
    <!--<link rel="alternate" type="application/rss+xml" title="Robert W. Pearce" href="http://robertwpearce.com/feed.xml">-->
  </head>
  <body>

  <nav>
    <div class="layout--constrained">
      <ul class="nav--main list--bare list--horz">
        <li><a href="/">Home</a></li>
        <li><a href="/hire-me.html">Hire Me</a></li>
        <li><a href="/blog/index.html">Blog</a></li>
      </ul>
    </div>
  </nav>

  <article class="article">
    <div class="article-background" style="background-image: url(http://s3.amazonaws.com/rpearce.github.io/riotjs/riotjs.jpg)">
      <div class="overlay"></div>
    </div>
    <div class="layout--constrained layout--pulledUp">
      <header class="article-header">
        <h1 class="heading--trim">
          <a href="">RiotJS Example</a>
        </h1>
        <small><em>Jan 28, 2015</em></small>
      </header>
<p>When I look at any of the myriad JavaScript UI libraries out there, I now ask two questions:</p>
<ul>
<li>Does data flow in one direction?</li>
<li>Do updates to the UI happen intelligently?</li>
</ul>
<p>I am a fan of Facebook&#39;s <a href="https://facebook.github.io/react/">ReactJS</a> library because of its DOM diffing (via the &quot;virtual DOM&quot;) and one-way data binding. React is a tool I use every day and have come to enjoy (sans-JSX), but I am always on the lookout for way to do things simpler.</p>
<p>A colleague of mine recently shared the second iteration of <a href="https://muut.com/riotjs/">RiotJS</a> with me. Of course, I was sucked in because it compared itself with React (a bold statement). You can <a href="https://muut.com/riotjs/compare.html">view the comparisons between Riot and React</a> for yourself.</p>
<p>One unfortunate fact about fledgling JS libraries is that they lack examples of how to accomplish common goals for the web. This is an attempt to help out with that.</p>
<h2 id="installation">Installation</h2>
<h3 id="project-specific">Project-Specific</h3>
<p><span class="strikethrough">While I am not a fan of Facebook&#39;s JSX (and don&#39;t use it--more to come in future blog posts on this), Riot&#39;s pre-compiled syntax is much easier to swallow.</span> Given you have a <code>package.json</code> set up, you can easily install the Riot compiler as a development dependency</p>
<pre><code class="lang-bash">$ npm install riot --save-dev
</code></pre>
<p>and then set up Riot to run as an NPM script and watch for any changes</p>
<pre><code class="lang-javascript">&quot;scripts&quot;: {
&quot;watch:riot&quot;: &quot;riot -w src/ build/&quot;
}
</code></pre>
<p>which is then run by a simple</p>
<pre><code class="lang-bash">$ npm run watch:riot
</code></pre>
<p>Alternatively, you can <a href="https://muut.com/riotjs/download.html">download the riot.js library</a> via any of their recommended methods.</p>
<h3 id="global-installation-alternative-">Global Installation (alternative)</h3>
<p>If you don&#39;t have a <code>package.json</code> and want to install Riot globally:</p>
<pre><code class="lang-bash">$ npm install riot -g
$ riot -w src/ build/
</code></pre>
<h2 id="tab-example">Tab Example</h2>
<p>I decided to start small and make a tabbing example where clicking a tab shows content related to it underneath.
Here is the final product:</p>
<iframe class="iframe--example" frameborder="0" src="http://www.robertwpearce.com/riotjs-examples/tabs.html" style="height: 550px;"></iframe>

<h3 id="step-1-start-with-markup">Step 1: Start With Markup</h3>
<p>Starting with a blank HTML document, add the <code>&lt;riot-tabs&gt;&lt;/riot-tabs&gt;</code> tag to your document:</p>
<pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
&lt;riot-tabs&gt;&lt;/riot-tabs&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>As mentioned previously, we know we need the (very tiny) RiotJS library, so don&#39;t forget to include it:</p>
<pre><code class="lang-html">&lt;body&gt;
&lt;riot-tabs&gt;&lt;/riot-tabs&gt;

&lt;script src=&quot;path/to/riot-2.0.1.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
</code></pre>
<p>Easy enough, right? Given Riot doesn&#39;t write our applications for us, we will need to tell Riot to mount some component, which in this case is &quot;tabs.&quot;</p>
<pre><code class="lang-html">&lt;body&gt;
&lt;riot-tabs&gt;&lt;/riot-tabs&gt;

&lt;script src=&quot;path/to/riot-2.0.1.js&quot;&gt;&lt;/script&gt;
&lt;script&gt;riot.mount(&#39;riot-tabs&#39;)&lt;/script&gt;
&lt;/body&gt;
</code></pre>
<p>When we run this code through the browser, we&#39;re going to receive an error telling us that <code>&#39;tabs&#39;</code> is not a thing. Congrats! Time for Step 2.</p>
<h3 id="step-2-creating-your-custom-tag">Step 2: Creating Your Custom Tag</h3>
<p>Riot&#39;s NPM package, as mentioned earlier, allows us to write and compile pseudo-markup mixed with a little JS. To get started, create a <code>src</code> folder and add a <code>tabs.tag</code> file to it, then run</p>
<pre><code class="lang-bash">$ npm run watch:riot
</code></pre>
<p>if you have an NPM script set up or</p>
<pre><code class="lang-bash">$ riot -w src/ build/`
</code></pre>
<p>to compile and watch for more changes to the file/folder.</p>
<p>Back in the <code>tabs.tag</code> file, add this:</p>
<pre><code class="lang-html">&lt;riot-tabs&gt;
&lt;h2&gt;Tabs&lt;/h2&gt;
&lt;ul&gt;
&lt;li class={ tabItem: true }&gt;Tab 1&lt;/li&gt;
&lt;li class={ tabItem: true }&gt;Tab 2&lt;/li&gt;
&lt;li class={ tabItem: true }&gt;Tab 3&lt;/li&gt;
&lt;/ul&gt;
&lt;/riot-tabs&gt;
</code></pre>
<p>That looks almost exactly like vanilla HTML, save for the conditional class(es), which we will use later with <code>is-active</code> classes. Also, they are way better than concatenating <code>className</code> strings yourself.</p>
<p>Refreshing your browser will show you that you now have content that is nested within a <code>&lt;riot-tabs&gt;&lt;/riot-tabs&gt;</code> tag.</p>
<p>Next up, we can add in the different tabs&#39; contents:</p>
<pre><code class="lang-html">&lt;riot-tabs&gt;
&lt;h2&gt;Tabs&lt;/h2&gt;
&lt;ul&gt;
&lt;li class={ tabItem: true }&gt;Tab 1&lt;/li&gt;
&lt;li class={ tabItem: true }&gt;Tab 2&lt;/li&gt;
&lt;li class={ tabItem: true }&gt;Tab 3&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;tabContent&quot;&gt;
&lt;div class={ tabContent__item: true }&gt;(1) Lorem ispum dolor...&lt;/div&gt;
&lt;div class={ tabContent__item: true }&gt;(2) Lorem ispum dolor...&lt;/div&gt;
&lt;div class={ tabContent__item: true }&gt;(3) Lorem ispum dolor...&lt;/div&gt;
&lt;/div&gt;
&lt;/riot-tabs&gt;
</code></pre>
<p>Okay, this is no big deal, so far.</p>
<p>Being software developers, we hate writing things over and over, so let&#39;s start with the tabs.</p>
<pre><code class="lang-html">&lt;riot-tabs&gt;
&lt;h2&gt;Tabs&lt;/h2&gt;
&lt;ul&gt;
&lt;li each={ tab, i in tabs } class={ tabItem: true }&gt;{tab.title}&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;tabContent&quot;&gt;
&lt;div class={ tabContent__item: true }&gt;(1) Lorem ispum dolor...&lt;/div&gt;
&lt;div class={ tabContent__item: true }&gt;(2) Lorem ispum dolor...&lt;/div&gt;
&lt;div class={ tabContent__item: true }&gt;(3) Lorem ispum dolor...&lt;/div&gt;
&lt;/div&gt;

this.tabs = [
{ title: &#39;Tab 1&#39; },
{ title: &#39;Tab 2&#39; },
{ title: &#39;Tab 3&#39; }
]
&lt;/riot-tabs&gt;
</code></pre>
<p>Riot has a nice each={ item, i in array } attribute, similar to JavaScript&#39;s for ... in ...</p>
<p>While we&#39;re at it, why not iterate over the content items, as well?</p>
<pre><code class="lang-html">&lt;riot-tabs&gt;
&lt;h2&gt;Tabs&lt;/h2&gt;
&lt;ul&gt;
&lt;li each={ tab, i in tabs } class=&quot;tabItem&quot;&gt;{tab.title}&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;tabContent&quot;&gt;
&lt;div each={ tab, i in tabs } class=&quot;tabContent__item&quot;&gt;{tab.content}&lt;/div&gt;
&lt;/div&gt;

this.tabs = [
{ title: &#39;Tab 1&#39;, content: &quot;(1) Lorem ipsum dolor&quot; },
{ title: &#39;Tab 2&#39;, content: &quot;(2) Lorem ipsum dolor&quot; },
{ title: &#39;Tab 3&#39;, content: &quot;(3) Lorem ipsum dolor&quot; }
]
&lt;/riot-tabs&gt;
</code></pre>
<p>Next, we need to set a default &quot;active tab&quot; and &quot;active content.&quot;</p>
<h3 id="step-3-conditional-classes">Step 3: Conditional Classes</h3>
<p>We want to be able to specify a default tab and tab content. This is accomplished via a conditional <code>is-active</code> class on both the <code>.tabItem</code> as well as the corresponding <code>.tabContent__item</code>. To keep track of what tab/content is active, we can</p>
<ul>
<li>add a property to the <code>this.tabs</code> array objects</li>
<li>set an <code>activeTab</code> property and</li>
<li>create a function to check if the currently iterated tab is the <code>activeTab</code></li>
</ul>
<pre><code class="lang-html">&lt;riot-tabs&gt;
&lt;h2&gt;Tabs&lt;/h2&gt;
&lt;ul&gt;
&lt;li each={ tab, i in tabs } class=&quot;tabItem { is-active: parent.isActiveTab(tab.ref) }&quot;&gt;{tab.title}&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;tabContent&quot;&gt;
&lt;div each={ tab, i in tabs } class=&quot;tabContent__item { is-active: parent.isActiveTab(tab.ref) }&quot;&gt;{tab.content}&lt;/div&gt;
&lt;/div&gt;

this.tabs = [
{ title: &#39;Tab 1&#39;, ref: &#39;tab1&#39;, content: &quot;(1) Lorem ipsum dolor&quot; },
{ title: &#39;Tab 2&#39;, ref: &#39;tab2&#39;, content: &quot;(2) Lorem ipsum dolor&quot; },
{ title: &#39;Tab 3&#39;, ref: &#39;tab3&#39;, content: &quot;(3) Lorem ipsum dolor&quot; }
]

this.activeTab = &#39;tab1&#39;

isActiveTab(tab) {
return this.activeTab === tab
}
&lt;/riot-tabs&gt;
</code></pre>
<p>Since these are <em>conditional</em> classes, they will either be evaluated as true or false (I believe that anything that is not falsy is considered true; for example, <code>new Date()</code> is considered <code>true</code>). Here, we create a function called <code>isActiveTab</code> and call it from the item itself, but because the function is not scoped to the item, we need to access the <code>parent</code> scope and call the function on that.</p>
<p>Finally, we need a way to react to <em>events</em>.</p>
<h3 id="step-4-toggling-the-tabs">Step 4: Toggling the Tabs</h3>
<p>When we click on a tab, we want that tab to now be active, and we want the corresponding tab content to be displayed. This can be done via an <code>onclick</code> handler that calls a function on the parent called <code>toggleTab</code></p>
<pre><code class="lang-html">&lt;riot-tabs&gt;
&lt;h2&gt;Tabs&lt;/h2&gt;
&lt;ul&gt;
&lt;li each={ tab, i in tabs } class=&quot;tabItem { is-active: parent.isActiveTab(tab.ref) }&quot; onclick={ parent.toggleTab }&gt;{tab.title}&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;tabContent&quot;&gt;
&lt;div each={ tab, i in tabs } class=&quot;tabContent__item { is-active: parent.isActiveTab(tab.ref) }&quot;&gt;{tab.content}&lt;/div&gt;
&lt;/div&gt;

this.tabs = [
{ title: &#39;Tab 1&#39;, ref: &#39;tab1&#39;, content: &quot;(1) Lorem ipsum dolor&quot; },
{ title: &#39;Tab 2&#39;, ref: &#39;tab2&#39;, content: &quot;(1) Lorem ipsum dolor&quot; },
{ title: &#39;Tab 3&#39;, ref: &#39;tab3&#39;, content: &quot;(1) Lorem ipsum dolor&quot; }
]

this.activeTab = &#39;tab1&#39;

isActiveTab(tab) {
return this.activeTab === tab
}

toggleTab(e) {
this.activeTab = e.item.tab.ref
return true
}
&lt;/riot-tabs&gt;
</code></pre>
<p>The <code>onclick</code> event handler receives an event object that is packed with information. What we want is the current tab that we are clicking on, and this is accessed through <code>e.item.tab.ref</code>, which is just the <code>ref</code> property on the <code>tab</code> object of the currently iterated <code>item</code>.</p>
<p>According to the Riot docs, when an event handler is called, Riot will automatically call <code>this.update()</code> and re-render the component. However, I found that after I altered my data, I had to <code>return true</code>.</p>
<p>Once this event handler is completed and the component is re-rendered, the correct tab and content will be displayed, and you will be happy.</p>
<h2 id="wrap-up">Wrap up</h2>
<p>In sum, playing with Riot was a mostly enjoyable experience, and I am thankful to the <a href="https://muut.com/">Muut</a> folks for releasing it.</p>
<p>While there are quirks (single quote vs double quote issues, among others) and opinions (neglecting the use of semi-colons, as well as <code>return</code>s), this is a promising UI library that I am <em>definitely</em> going to consider vs. React in my future projects.</p>
    </div>
  </article>

  </body>
</html>

