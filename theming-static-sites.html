<!DOCTYPE html><html lang="en"><head><title>Theming static sites</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Allowing readers to choose themes on your static site is a way to respect their system preferences and give them viewing choices without requiring an account nor cookies."><meta name="author" content="Robert Pearce"><meta name="keywords" content="static site theme, css theming, css themes, dark mode, light mode, javascript, prefers-color-scheme"><meta name="google-site-verification" content="QX4bn65yOXBfgnwxlO09yIBc1H8blur-Erx3lmsDVhU"><meta http-equiv="origin-trial" content="Am4BZ0c7GMyB72dgo/Ny2FfIFscXhYMoN+CVe4jduWh24FvsaCwf7kjZzHzfrJXtIilyZVAEKRxOItGLY7lvkAgAAABSeyJvcmlnaW4iOiJodHRwczovL3JvYmVydHdwZWFyY2UuY29tOjQ0MyIsImZlYXR1cmUiOiJQb3J0YWxzIiwiZXhwaXJ5IjoxNjAzNTQ2NDc3fQ=="><meta property="og:site_name" content="Robert Pearce"><meta property="og:title" content="Theming static sites"><meta property="og:url" content="https://robertwpearce.com/theming-static-sites.html"><meta property="og:description" content="Allowing readers to choose themes on your static site is a way to respect their system preferences and give them viewing choices without requiring an account nor cookies."><meta property="og:type" content="article"><meta property="twitter:site" content="Robert Pearce"><meta property="twitter:title" content="Theming static sites"><meta property="twitter:description" content="Allowing readers to choose themes on your static site is a way to respect their system preferences and give them viewing choices without requiring an account nor cookies."><meta property="twitter:creator" content="@RobertWPearce"><link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ðŸ’¾</text></svg>"><link rel="canonical" href="https://robertwpearce.com/theming-static-sites.html"><link rel="alternate" href="./atom.xml" title="Robert Pearce's blog" type="application/atom+xml"><link rel="alternate" href="./rss.xml" title="Robert Pearce's blog" type="application/rss+xml"><link rel="stylesheet" href="./css/base.css"><link rel="stylesheet" href="./css/t-clean.css"><link rel="stylesheet" href="./css/t-clean-note.css"><link rel="stylesheet" href="./css/t-code-dracula.css"><link rel="prefetch" href="./css/t-clean-note.css"></head><body data-theme="clean-night"><script> (() => { window.site = { prefFont: localStorage.getItem('prefFont') || 'monospace', setFont: (family) => { localStorage.setItem('prefFont', family); const rootStyle = document.querySelector(':root').style; rootStyle.setProperty('--type-family-body', family+',monospace'); /* Remove when https://github.com/googlefonts/spacemono/pull/2 is resolved */ if (family === 'Liga Space Mono') { rootStyle.setProperty('font-feature-settings', '"liga" 0'); } else { rootStyle.removeProperty('font-feature-settings'); } return window.site._fetchFont(family); }, prefTheme: localStorage.getItem('prefTheme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'clean-night' : 'clean-day'), setTheme: (name) => { const rootStyle = document.querySelector(':root').style; if (name === 'clean-night') { rootStyle.removeProperty('color-scheme'); } else { rootStyle.setProperty('color-scheme', 'light'); } document.body.setAttribute('data-theme', name); localStorage.setItem('prefTheme', name); }, _fetchFont: (family) => { if (family === 'monospace') { return Promise.resolve(); } const familyNoSpaces = family.replaceAll(' ', ''); const fontz = [ new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Regular.woff2") format("woff2")', { display: 'swap', weight: 400 }), new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Bold.woff2") format("woff2")', { display: 'swap', weight: 700 }), ]; if (family !== 'Fira Code') { fontz.push( new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Italic.woff2") format("woff2")', { display: 'swap', style: 'italic', weight: 400 }), new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-BoldItalic.woff2") format("woff2")', { display: 'swap', style: 'italic', weight: 700 }) ); } for (const f of fontz) { document.fonts.add(f); } return Promise.allSettled(fontz).then(results => { results.forEach((res, i) => { if (res.status === 'rejected') { console.error('site failed to load font: ' + fontz[i]?.family ?? 'unknown'); } }); }); } }; window.site.setTheme(window.site.prefTheme); window.site.setFont(window.site.prefFont); })(); </script><header><nav><div class="nav-skip"><a href="#content">Skip to content</a></div><a aria-label="Home" class="nav-home" href="./">~</a><span>/</span></nav><div class="header-extra"><a href="./atom.xml">RSS</a><span aria-hidden="true">&compfn;</span><noscript>(requires JS &rarr;)</noscript><label for="select-theme">Theme</label><select data-select-theme id="select-theme"><option value="clean-day">Clean (Day)</option><option value="clean-night">Clean (Night)</option></select><span aria-hidden="true">&compfn;</span><label for="select-font">Font</label><select data-select-font id="select-font"><option value="monospace">monospace</option><option value="Liga Space Mono">Space Mono</option><option value="Victor Mono">Victor Mono</option><option value="Fira Code">Fira Code</option><option value="JetBrains Mono">JetBrains Mono</option></select></div></header><main id="content"><header data-area="heading"><h1>Theming static sites</h1></header><section data-area="meta"><h2>Info</h2><table data-type="cols-y"><tbody><tr><th>Summary</th><td>Allowing readers to choose themes on your static site is a way to respect their system preferences and give them viewing choices without requiring an account nor cookies.</td></tr><tr><th>Shared</th><td>2024-01-02</td></tr><tr><th>Revised</th><td>2024-01-10 @ 12:00 UTC</td></tr></tbody></table></section><section data-area="note"><p>In this post, weâ€™re going to dive into some useful patterns for theming static websites that we can start using today to respect usersâ€™ system preferences and provide them with custom ways of viewing our content.</p><p>This post is sponsored by <a href="https://flaviocorpa.com">Flavio Corpa (kutyel)</a>, and if youâ€™re curious about Elm, Haskell, or functional JS, check out his work! If youâ€™d like to sponsor me writing about a topic, check out <a href="https://github.com/sponsors/rpearce/">my GitHub Sponsors page</a>.</p><h2 id="a-little-about-static-sites">A little about static sites</h2><p>Static websites are typically <code>.html</code>-suffixed files that use only HTML, CSS, and a little JS, and they have a number of advantages: theyâ€™re <em>usually</em> cheap to maintain, easy to deploy, easy to cache via CDNs, and have fewer security risks than dynamic web applications since they donâ€™t have backend application servers. Static sites fit perfectly in the old web style of blogs, information sites, small business sites, personal photo galleries, etc. However, when it comes to setting and storing readersâ€™ preferencesâ€”a common expectation these daysâ€”static sites are at a disadvantage, for they have no backend app server with which to communicate to figure this out and render the page <em>just right</em> for a viewer.</p><p>For me (and the purposes of this post), static sites do not refer to single-page apps (SPAs) nor server-side rendered web apps.</p><h2 id="our-goals">Our goals</h2><ul><li>Provide readers with different theme options</li><li>Support readersâ€™ light/dark mode system preferences</li><li>Use patterns that can be extended to providing preferences for font families, text styling, animations, and anything you can imagine someone might want to customize for your site. Note: always respect user system settings first, then utilize this sort of customization on top of that! <a href="https://overlayfactsheet.com">Donâ€™t make (or use) an accessibility overlay</a> with this pattern.</li></ul><h2 id="the-example">The example</h2><p>Apart from this website, which demonstrates most everything weâ€™ll cover, I made <a href="./examples/theming-static-sites/index.html">a smaller example site here</a>. Go ahead and open it up, make some selections, and refresh the page a few times, if you like. We will reference this example throughout the rest of this post, so keep the page open. The only bummer is that weâ€™ll not be covering the font changing in this post, but its code is available in the example and follows the same patterns weâ€™ll do here.</p><p>Here are some screenshots:</p><p><img alt="Black/dark theme example with a duotone moon graphic and some preference options" decoding="async" height="1044" src="./examples/theming-static-sites/images/moon.webp" width="1344" /></p><p><img alt="Green/forest theme example with a gradient bar graphic and some preference options" decoding="async" height="1044" src="./examples/theming-static-sites/images/forest.webp" width="1344" /></p><p><img alt="Light/ocean theme example with a gradient polygon graphic and some preference options" decoding="async" height="1044" src="./examples/theming-static-sites/images/ocean.webp" width="1344" /></p><h2 id="sketching-our-html">Sketching our HTML</h2><p>Letâ€™s sketch out some markup weâ€™ll need to accomplish our goal:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-cp">&lt;!DOCTYPE html&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">&lt;</span><span class="pl-nt">html</span> <span class="pl-na">lang</span><span class="pl-o">=</span><span class="pl-s">"en"</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;</span><span class="pl-nt">head</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-c">&lt;!-- The usual title, meta, and link elements go here. --&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;/</span><span class="pl-nt">head</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;</span><span class="pl-nt">body</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;</span><span class="pl-nt">script</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-cm">/*
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">       * This is where we'll put some blocking JS
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">       * that does a couple of things before the
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">       * page is painted. Trust me!
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">       */</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;/</span><span class="pl-nt">script</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;</span><span class="pl-nt">main</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-p">&lt;</span><span class="pl-nt">h1</span><span class="pl-p">&gt;</span>Static site theming example<span class="pl-p">&lt;/</span><span class="pl-nt">h1</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-c">&lt;!--
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c">      This is where our &lt;select&gt; element
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c">      for changing the theme will go.
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c">      --&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;/</span><span class="pl-nt">main</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;</span><span class="pl-nt">script</span> <span class="pl-na">async</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-cm">/*
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">       * This is where we'll add some event listeners
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">       * to handle changes to our theming options. I
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">       * did this part using the body of a script element,
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">       * but it could reference a script file using the
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">       * `src` attribute, instead.
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">       */</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;/</span><span class="pl-nt">script</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;/</span><span class="pl-nt">body</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">&lt;/</span><span class="pl-nt">html</span><span class="pl-p">&gt;</span></span></span></code></pre><h2 id="theme-selector">Theme selector</h2><p>After our <code>&lt;h1&gt;</code> element, letâ€™s add a form select input that weâ€™ll provide the reader for controlling their theme.</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-p">&lt;</span><span class="pl-nt">form</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;</span><span class="pl-nt">label</span> <span class="pl-na">for</span><span class="pl-o">=</span><span class="pl-s">"select-theme"</span><span class="pl-p">&gt;</span>Theme<span class="pl-p">&lt;/</span><span class="pl-nt">label</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;</span><span class="pl-nt">select</span> <span class="pl-na">data-select-theme</span><span class="pl-o">=</span><span class="pl-s">""</span> <span class="pl-na">id</span><span class="pl-o">=</span><span class="pl-s">"select-theme"</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;</span><span class="pl-nt">option</span> <span class="pl-na">value</span><span class="pl-o">=</span><span class="pl-s">"moon"</span><span class="pl-p">&gt;</span>That<span class="pl-ni">&amp;apos;</span>s No Moon<span class="pl-p">&lt;/</span><span class="pl-nt">option</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;</span><span class="pl-nt">option</span> <span class="pl-na">value</span><span class="pl-o">=</span><span class="pl-s">"forest"</span><span class="pl-p">&gt;</span>Forest<span class="pl-p">&lt;/</span><span class="pl-nt">option</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;</span><span class="pl-nt">option</span> <span class="pl-na">value</span><span class="pl-o">=</span><span class="pl-s">"ocean"</span><span class="pl-p">&gt;</span>Ocean<span class="pl-p">&lt;/</span><span class="pl-nt">option</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;/</span><span class="pl-nt">select</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">&lt;/</span><span class="pl-nt">form</span><span class="pl-p">&gt;</span></span></span></code></pre><p>Letâ€™s then add some JS to the <code>&lt;script async&gt;</code> element at the bottom to listen for changes to our <code>&lt;select&gt;</code>:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-p">(()</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-kr">const</span> <span class="pl-nx">themeEl</span> <span class="pl-o">=</span> <span class="pl-nb">document</span><span class="pl-p">.</span><span class="pl-nx">querySelector</span><span class="pl-p">(</span><span class="pl-s1">'[data-select-theme]'</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-k">if</span> <span class="pl-p">(</span><span class="pl-nx">themeEl</span><span class="pl-p">)</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-nx">themeEl</span><span class="pl-p">.</span><span class="pl-nx">addEventListener</span><span class="pl-p">(</span><span class="pl-s1">'change'</span><span class="pl-p">,</span> <span class="pl-nx">e</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-nx">console</span><span class="pl-p">.</span><span class="pl-nx">log</span><span class="pl-p">(</span><span class="pl-nx">e</span><span class="pl-p">.</span><span class="pl-nx">target</span><span class="pl-p">.</span><span class="pl-nx">value</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-c1">// We need to do something here!
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span>    <span class="pl-p">});</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">})();</span></span></span></code></pre><p>If we were using a backend server, weâ€™d submit the readersâ€™ selection to the backend to store in a database or cookie, but since we donâ€™t have a backend, we need to use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage">localStorage</a>.</p><p>Where we have that <code>console.log</code> and code comment above, it would be nice if we could call a function or method that would set the theme for us and do all that work. Letâ€™s do that!</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-nx">themeEl</span><span class="pl-p">.</span><span class="pl-nx">addEventListener</span><span class="pl-p">(</span><span class="pl-s1">'change'</span><span class="pl-p">,</span> <span class="pl-nx">e</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span><span class="pl-p">.</span><span class="pl-nx">setTheme</span><span class="pl-p">(</span><span class="pl-nx">e</span><span class="pl-p">.</span><span class="pl-nx">target</span><span class="pl-p">.</span><span class="pl-nx">value</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">});</span></span></span></code></pre><p>That feels better, but we donâ€™t have a <code>site</code> object and therefore no <code>setTheme</code> method on it. Since weâ€™ll probably want <code>site</code> to be available when the page is loading, weâ€™re going to put this initialization code in the first <code>&lt;script&gt;</code> element:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-p">(()</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span> <span class="pl-o">=</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-nx">setTheme</span><span class="pl-o">:</span> <span class="pl-p">(</span><span class="pl-nx">name</span><span class="pl-p">)</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">     <span class="pl-c1">// Our theme-setting code will go here
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span>    <span class="pl-p">},</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">};</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">});</span></span></span></code></pre><p>Before we add our theme-setting code, we need to talk about what we want it to do:</p><ol><li>We want it to set a value somewhere that our CSS can use to know what the theme is set to. How about a <code>data-</code> attribute on the <code>body</code>? Why not?</li><li>We want to store that theme value in <code>localStorage</code></li></ol><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span> <span class="pl-o">=</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">setTheme</span><span class="pl-o">:</span> <span class="pl-p">(</span><span class="pl-nx">name</span><span class="pl-p">)</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-nb">document</span><span class="pl-p">.</span><span class="pl-nx">body</span><span class="pl-p">.</span><span class="pl-nx">setAttribute</span><span class="pl-p">(</span><span class="pl-s1">'data-theme'</span><span class="pl-p">,</span> <span class="pl-nx">name</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-nx">localStorage</span><span class="pl-p">.</span><span class="pl-nx">setItem</span><span class="pl-p">(</span><span class="pl-s1">'prefTheme'</span><span class="pl-p">,</span> <span class="pl-nx">name</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">},</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">};</span></span></span></code></pre><p>This means that in our HTML file above, we should go back and add a default <code>data-theme</code> on <code>&lt;body&gt;</code> for when the page loads the first time:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-p">&lt;</span><span class="pl-nt">body</span> <span class="pl-na">data-theme</span><span class="pl-o">=</span><span class="pl-s">"moon"</span><span class="pl-p">&gt;</span></span></span></code></pre><p>Then, when a reader makes a change to the theme, itâ€™ll update that value to whatever the value was set to in the <code>&lt;select&gt;</code>.</p><h2 id="a-note-about-the-css">A note about the CSS</h2><p>Feel free to poke around <a href="https://github.com/rpearce/robertwpearce.com/blob/main/src/examples/theming-static-sites/css/styles.css">the exampleâ€™s CSS</a> to see this in full, but hereâ€™s the gist.</p><p>For our CSS, all we need to do is have our styles use CSS variables for the things that can change, and then those CSS variables are defined like this:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-nt">body</span><span class="pl-o">,</span> <span class="pl-c">/* Because moon is the default here...this is just in case */</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nt">body</span><span class="pl-o">[</span><span class="pl-nt">data-theme</span><span class="pl-o">=</span><span class="pl-s2">"moon"</span><span class="pl-o">]</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--alpha-link-visited</span><span class="pl-p">:</span> <span class="pl-mf">0.85</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-bg-body</span><span class="pl-p">:</span> <span class="pl-mi">21</span><span class="pl-p">,</span> <span class="pl-mi">21</span><span class="pl-p">,</span> <span class="pl-mi">21</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-bg-select</span><span class="pl-p">:</span> <span class="pl-mi">21</span><span class="pl-p">,</span> <span class="pl-mi">21</span><span class="pl-p">,</span> <span class="pl-mi">21</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-border-select</span><span class="pl-p">:</span> <span class="pl-mi">206</span><span class="pl-p">,</span> <span class="pl-mi">206</span><span class="pl-p">,</span> <span class="pl-mi">206</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-link</span><span class="pl-p">:</span> <span class="pl-mi">246</span><span class="pl-p">,</span> <span class="pl-mi">241</span><span class="pl-p">,</span> <span class="pl-mi">213</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-sponsor-hearts</span><span class="pl-p">:</span> <span class="pl-mi">206</span><span class="pl-p">,</span> <span class="pl-mi">206</span><span class="pl-p">,</span> <span class="pl-mi">206</span><span class="pl-p">,</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-o">--</span><span class="pl-kc">color</span><span class="pl-o">-</span><span class="pl-kc">text</span><span class="pl-o">:</span> <span class="pl-mi">206</span><span class="pl-p">,</span> <span class="pl-mi">206</span><span class="pl-p">,</span> <span class="pl-mi">206</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--icon-select</span><span class="pl-p">:</span> <span class="pl-nf">var</span><span class="pl-p">(</span><span class="pl-o">--</span><span class="pl-kc">icon</span><span class="pl-o">-</span><span class="pl-n">select</span><span class="pl-o">-</span><span class="pl-n">moon</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--link-underline-offset</span><span class="pl-p">:</span> <span class="pl-mf">0.2</span><span class="pl-kt">rem</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--link-underline-thickness</span><span class="pl-p">:</span> <span class="pl-nf">max</span><span class="pl-p">(</span><span class="pl-mf">0.1</span><span class="pl-kt">rem</span><span class="pl-p">,</span> <span class="pl-mi">1</span><span class="pl-kt">px</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--link-weight</span><span class="pl-p">:</span> <span class="pl-kc">bold</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nt">body</span><span class="pl-o">[</span><span class="pl-nt">data-theme</span><span class="pl-o">=</span><span class="pl-s2">"forest"</span><span class="pl-o">]</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--alpha-link-visited</span><span class="pl-p">:</span> <span class="pl-mf">0.9</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-bg-body</span><span class="pl-p">:</span> <span class="pl-mi">57</span><span class="pl-p">,</span> <span class="pl-mi">76</span><span class="pl-p">,</span> <span class="pl-mi">66</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-bg-select</span><span class="pl-p">:</span> <span class="pl-mi">57</span><span class="pl-p">,</span> <span class="pl-mi">76</span><span class="pl-p">,</span> <span class="pl-mi">66</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-border-select</span><span class="pl-p">:</span> <span class="pl-mi">255</span><span class="pl-p">,</span> <span class="pl-mi">255</span><span class="pl-p">,</span> <span class="pl-mi">255</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-link</span><span class="pl-p">:</span> <span class="pl-mi">238</span><span class="pl-p">,</span> <span class="pl-mi">213</span><span class="pl-p">,</span> <span class="pl-mi">174</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-sponsor-hearts</span><span class="pl-p">:</span> <span class="pl-mi">153</span><span class="pl-p">,</span> <span class="pl-mi">117</span><span class="pl-p">,</span> <span class="pl-mi">90</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-text</span><span class="pl-p">:</span> <span class="pl-mi">255</span><span class="pl-p">,</span> <span class="pl-mi">255</span><span class="pl-p">,</span> <span class="pl-mi">255</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--icon-select</span><span class="pl-p">:</span> <span class="pl-nf">var</span><span class="pl-p">(</span><span class="pl-o">--</span><span class="pl-kc">icon</span><span class="pl-o">-</span><span class="pl-n">select</span><span class="pl-o">-</span><span class="pl-n">forest</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--link-underline-offset</span><span class="pl-p">:</span> <span class="pl-mf">0.2</span><span class="pl-kt">rem</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--link-underline-thickness</span><span class="pl-p">:</span> <span class="pl-nf">max</span><span class="pl-p">(</span><span class="pl-mf">0.1</span><span class="pl-kt">rem</span><span class="pl-p">,</span> <span class="pl-mi">1</span><span class="pl-kt">px</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nt">body</span><span class="pl-o">[</span><span class="pl-nt">data-theme</span><span class="pl-o">=</span><span class="pl-s2">"ocean"</span><span class="pl-o">]</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--alpha-link-visited</span><span class="pl-p">:</span> <span class="pl-mf">0.85</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-bg-body</span><span class="pl-p">:</span> <span class="pl-mi">82</span><span class="pl-p">,</span> <span class="pl-mi">179</span><span class="pl-p">,</span> <span class="pl-mi">201</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-bg-select</span><span class="pl-p">:</span> <span class="pl-mi">123</span><span class="pl-p">,</span> <span class="pl-mi">203</span><span class="pl-p">,</span> <span class="pl-mi">222</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-border-select</span><span class="pl-p">:</span> <span class="pl-mi">0</span><span class="pl-p">,</span> <span class="pl-mi">43</span><span class="pl-p">,</span> <span class="pl-mi">77</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-link</span><span class="pl-p">:</span> <span class="pl-mi">0</span><span class="pl-p">,</span> <span class="pl-mi">43</span><span class="pl-p">,</span> <span class="pl-mi">77</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-sponsor-hearts</span><span class="pl-p">:</span> <span class="pl-mi">0</span><span class="pl-p">,</span> <span class="pl-mi">43</span><span class="pl-p">,</span> <span class="pl-mi">77</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--color-text</span><span class="pl-p">:</span> <span class="pl-mi">0</span><span class="pl-p">,</span> <span class="pl-mi">43</span><span class="pl-p">,</span> <span class="pl-mi">77</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--icon-select</span><span class="pl-p">:</span> <span class="pl-nf">var</span><span class="pl-p">(</span><span class="pl-o">--</span><span class="pl-kc">icon</span><span class="pl-o">-</span><span class="pl-n">select</span><span class="pl-o">-</span><span class="pl-n">ocean</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--link-underline-offset</span><span class="pl-p">:</span> <span class="pl-mf">0.3</span><span class="pl-kt">rem</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nv">--link-underline-thickness</span><span class="pl-p">:</span> <span class="pl-mf">0.2</span><span class="pl-kt">rem</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">}</span></span></span></code></pre><p>With this approach, every time the <code>data-theme</code> on <code>body</code> changes to a known value (<code>moon</code>, <code>forest</code>, or <code>ocean</code>), the CSS variables for that theme get used, and boom! You have theming! Great!</p><p>But what happens if they refresh the pageâ€¦?</p><h2 id="back-to-the-js">Back to the JS</h2><p>Oh no! The <code>&lt;select&gt;</code> isnâ€™t populated with what the reader selected, and their theme isnâ€™t the one they chose, either!</p><p>No worries! Letâ€™s get access to the <code>prefTheme</code> as the page is loading:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span> <span class="pl-o">=</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">prefTheme</span><span class="pl-o">:</span> <span class="pl-nx">getPrefTheme</span><span class="pl-p">(),</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-c1">// ...
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-kd">function</span> <span class="pl-nx">getPrefTheme</span><span class="pl-p">()</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-kr">const</span> <span class="pl-nx">localPrefTheme</span> <span class="pl-o">=</span> <span class="pl-nx">localStorage</span><span class="pl-p">.</span><span class="pl-nx">getItem</span><span class="pl-p">(</span><span class="pl-s1">'prefTheme'</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-cm">/*
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">   * Make sure only our current themes are the ones that
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">   * can be set.
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">   *
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">   * Note: I should source the theme names elsewhere for a single
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">   * source of truth, but I'll figure that out another time. The
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">   * `&lt;select&gt;` isn't available at this point in the rendering
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">   * for us to look at the `&lt;option&gt;`s...
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-cm">   */</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-k">if</span> <span class="pl-p">([</span><span class="pl-s1">'moon'</span><span class="pl-p">,</span> <span class="pl-s1">'forest'</span><span class="pl-p">,</span> <span class="pl-s1">'ocean'</span><span class="pl-p">].</span><span class="pl-nx">includes</span><span class="pl-p">(</span><span class="pl-nx">localPrefTheme</span><span class="pl-p">))</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-k">return</span> <span class="pl-nx">localPrefTheme</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">}</span> <span class="pl-k">else</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-k">return</span> <span class="pl-nx">matchMedia</span><span class="pl-p">(</span><span class="pl-s1">'(prefers-color-scheme: dark)'</span><span class="pl-p">).</span><span class="pl-nx">matches</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-o">?</span> <span class="pl-s1">'moon'</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-o">:</span> <span class="pl-s1">'ocean'</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span><span class="pl-p">.</span><span class="pl-nx">setTheme</span><span class="pl-p">(</span><span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span><span class="pl-p">.</span><span class="pl-nx">prefTheme</span><span class="pl-p">);</span></span></span></code></pre><p>When the page is loading, we try to get the <code>prefTheme</code> from <code>localStorage</code>, and if the value doesnâ€™t match any of our current themes, then we use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia"><code>matchMedia</code></a> to figure out if we should serve up a dark or light theme to the user.</p><p>Once we have a theme value stored, we go ahead and call <code>window.site.setTheme(window.site.prefTheme)</code> just in case to make sure we have something stored for next time. We could do this in <code>getPrefTheme()</code> in the <code>matchMedia</code> logic branch, but doing so feels a little dirty to me.</p><p>Lastly for themes, we need to use <code>window.site.prefTheme</code> to select the correct dropdown option, and we can do that by sliding the work in where we have our <code>&lt;select&gt;</code>â€™s <code>addEventListener</code>:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-k">if</span> <span class="pl-p">(</span><span class="pl-nx">themeEl</span><span class="pl-p">)</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">themeEl</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">.</span><span class="pl-nx">querySelector</span><span class="pl-p">(</span><span class="pl-sb">`[value="</span><span class="pl-si">${</span><span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span><span class="pl-p">.</span><span class="pl-nx">prefTheme</span><span class="pl-si">}</span><span class="pl-sb">"]`</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">.</span><span class="pl-nx">selected</span> <span class="pl-o">=</span> <span class="pl-s1">'selected'</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">themeEl</span><span class="pl-p">.</span><span class="pl-nx">addEventListener</span><span class="pl-p">(</span><span class="pl-s1">'change'</span><span class="pl-p">,</span> <span class="pl-nx">e</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span><span class="pl-p">.</span><span class="pl-nx">setTheme</span><span class="pl-p">(</span><span class="pl-nx">e</span><span class="pl-p">.</span><span class="pl-nx">target</span><span class="pl-p">.</span><span class="pl-nx">value</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">});</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">}</span></span></span></code></pre><h2 id="code-recap">Code recap</h2><p>If you got lost along the way, no worries! Hereâ€™s a recap of all the code we did, and if you want to see it in action, be sure to check out the code used in <a href="./examples/theming-static-sites/index.html">the example</a>.</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-p">&lt;</span><span class="pl-nt">body</span> <span class="pl-na">data-theme</span><span class="pl-o">=</span><span class="pl-s">"moon"</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;</span><span class="pl-nt">script</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">(()</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span> <span class="pl-o">=</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-nx">prefTheme</span><span class="pl-o">:</span> <span class="pl-nx">getPrefTheme</span><span class="pl-p">();</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-nx">setTheme</span><span class="pl-o">:</span> <span class="pl-p">(</span><span class="pl-nx">name</span><span class="pl-p">)</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">          <span class="pl-nb">document</span><span class="pl-p">.</span><span class="pl-nx">body</span><span class="pl-p">.</span><span class="pl-nx">setAttribute</span><span class="pl-p">(</span><span class="pl-s1">'data-theme'</span><span class="pl-p">,</span> <span class="pl-nx">name</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">          <span class="pl-nx">localStorage</span><span class="pl-p">.</span><span class="pl-nx">setItem</span><span class="pl-p">(</span><span class="pl-s1">'prefTheme'</span><span class="pl-p">,</span> <span class="pl-nx">name</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-p">},</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-p">};</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-kd">function</span> <span class="pl-nx">getPrefTheme</span><span class="pl-p">()</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-kr">const</span> <span class="pl-nx">localPrefTheme</span> <span class="pl-o">=</span> <span class="pl-nx">localStorage</span><span class="pl-p">.</span><span class="pl-nx">getItem</span><span class="pl-p">(</span><span class="pl-s1">'prefTheme'</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-k">if</span> <span class="pl-p">([</span><span class="pl-s1">'moon'</span><span class="pl-p">,</span> <span class="pl-s1">'forest'</span><span class="pl-p">,</span> <span class="pl-s1">'ocean'</span><span class="pl-p">].</span><span class="pl-nx">includes</span><span class="pl-p">(</span><span class="pl-nx">localPrefTheme</span><span class="pl-p">))</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">          <span class="pl-k">return</span> <span class="pl-nx">localPrefTheme</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-p">}</span> <span class="pl-k">else</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">          <span class="pl-k">return</span> <span class="pl-nx">matchMedia</span><span class="pl-p">(</span><span class="pl-s1">'(prefers-color-scheme: dark)'</span><span class="pl-p">).</span><span class="pl-nx">matches</span>
</span></span><span class="pl-line"><span class="pl-cl">            <span class="pl-o">?</span> <span class="pl-s1">'moon'</span>
</span></span><span class="pl-line"><span class="pl-cl">            <span class="pl-o">:</span> <span class="pl-s1">'ocean'</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span><span class="pl-p">.</span><span class="pl-nx">setTheme</span><span class="pl-p">(</span><span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span><span class="pl-p">.</span><span class="pl-nx">prefTheme</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">})();</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;/</span><span class="pl-nt">script</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;</span><span class="pl-nt">main</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;</span><span class="pl-nt">h1</span><span class="pl-p">&gt;</span>Static site theming example<span class="pl-p">&lt;/</span><span class="pl-nt">h1</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">&lt;</span><span class="pl-nt">form</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-p">&lt;</span><span class="pl-nt">label</span> <span class="pl-na">for</span><span class="pl-o">=</span><span class="pl-s">"select-theme"</span><span class="pl-p">&gt;</span>Theme<span class="pl-p">&lt;/</span><span class="pl-nt">label</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">       <span class="pl-p">&lt;</span><span class="pl-nt">select</span> <span class="pl-na">data-select-theme</span><span class="pl-o">=</span><span class="pl-s">""</span> <span class="pl-na">id</span><span class="pl-o">=</span><span class="pl-s">"select-theme"</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">         <span class="pl-p">&lt;</span><span class="pl-nt">option</span> <span class="pl-na">value</span><span class="pl-o">=</span><span class="pl-s">"moon"</span><span class="pl-p">&gt;</span>That<span class="pl-ni">&amp;apos;</span>s No Moon<span class="pl-p">&lt;/</span><span class="pl-nt">option</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">         <span class="pl-p">&lt;</span><span class="pl-nt">option</span> <span class="pl-na">value</span><span class="pl-o">=</span><span class="pl-s">"forest"</span><span class="pl-p">&gt;</span>Forest<span class="pl-p">&lt;/</span><span class="pl-nt">option</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">         <span class="pl-p">&lt;</span><span class="pl-nt">option</span> <span class="pl-na">value</span><span class="pl-o">=</span><span class="pl-s">"ocean"</span><span class="pl-p">&gt;</span>Ocean<span class="pl-p">&lt;/</span><span class="pl-nt">option</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">       <span class="pl-p">&lt;/</span><span class="pl-nt">select</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">     <span class="pl-p">&lt;/</span><span class="pl-nt">form</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;/</span><span class="pl-nt">main</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;</span><span class="pl-nt">script</span> <span class="pl-na">async</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">(()</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-kr">const</span> <span class="pl-nx">themeEl</span> <span class="pl-o">=</span> <span class="pl-nb">document</span><span class="pl-p">.</span><span class="pl-nx">querySelector</span><span class="pl-p">(</span><span class="pl-s1">'[data-select-theme]'</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-k">if</span> <span class="pl-p">(</span><span class="pl-nx">themeEl</span><span class="pl-p">)</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-nx">themeEl</span>
</span></span><span class="pl-line"><span class="pl-cl">          <span class="pl-p">.</span><span class="pl-nx">querySelector</span><span class="pl-p">(</span><span class="pl-sb">`[value="</span><span class="pl-si">${</span><span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span><span class="pl-p">.</span><span class="pl-nx">prefTheme</span><span class="pl-si">}</span><span class="pl-sb">"]`</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">          <span class="pl-p">.</span><span class="pl-nx">selected</span> <span class="pl-o">=</span> <span class="pl-s1">'selected'</span><span class="pl-p">;</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-nx">themeEl</span><span class="pl-p">.</span><span class="pl-nx">addEventListener</span><span class="pl-p">(</span><span class="pl-s1">'change'</span><span class="pl-p">,</span> <span class="pl-nx">e</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">          <span class="pl-nb">window</span><span class="pl-p">.</span><span class="pl-nx">site</span><span class="pl-p">.</span><span class="pl-nx">setTheme</span><span class="pl-p">(</span><span class="pl-nx">e</span><span class="pl-p">.</span><span class="pl-nx">target</span><span class="pl-p">.</span><span class="pl-nx">value</span><span class="pl-p">);</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-p">});</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">})();</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">&lt;/</span><span class="pl-nt">script</span><span class="pl-p">&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">&lt;/</span><span class="pl-nt">body</span><span class="pl-p">&gt;</span></span></span></code></pre><hr /><p>Thanks for reading!<br /> â€” Robert</p></section></main><footer><span aria-hidden="true" class="heart">â™¥</span><span aria-hidden="true">&rarr;</span><a href="https://github.com/sponsors/rpearce/">Sponsor my work</a><span aria-hidden="true">&larr;</span><span aria-hidden="true" class="heart">â™¥</span></footer><script async> (() => { const themeEl = document.querySelector('[data-select-theme]'); if (themeEl) { themeEl.querySelector('[value="'+window.site.prefTheme+'"]').selected = 'selected'; themeEl.addEventListener('change', e => { window.site.setTheme(e.target.value); }); } const fontEl = document.querySelector('[data-select-font]'); if (fontEl) { fontEl.querySelector('[value="'+window.site.prefFont+'"]').selected = 'selected'; fontEl.addEventListener('change', e => { window.site.setFont(e.target.value); }) } })(); </script></body></html>