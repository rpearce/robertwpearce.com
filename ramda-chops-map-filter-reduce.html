<!DOCTYPE html><html lang="en"><head><title>Ramda Chops: Map, Filter & Reduce</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="How to use ramda's map, filter and reduce functions to filter and transform a list of popular films."><meta name="author" content="Robert Pearce"><meta name="keywords" content="ramda, ramda.js, ramdajs, ramda tutorial, ramda map, ramda filter, ramda reduce, ramda fp"><meta name="google-site-verification" content="QX4bn65yOXBfgnwxlO09yIBc1H8blur-Erx3lmsDVhU"><meta http-equiv="origin-trial" content="Am4BZ0c7GMyB72dgo/Ny2FfIFscXhYMoN+CVe4jduWh24FvsaCwf7kjZzHzfrJXtIilyZVAEKRxOItGLY7lvkAgAAABSeyJvcmlnaW4iOiJodHRwczovL3JvYmVydHdwZWFyY2UuY29tOjQ0MyIsImZlYXR1cmUiOiJQb3J0YWxzIiwiZXhwaXJ5IjoxNjAzNTQ2NDc3fQ=="><meta property="og:site_name" content="Robert Pearce"><meta property="og:title" content="Ramda Chops: Map, Filter & Reduce"><meta property="og:url" content="https://robertwpearce.com/ramda-chops-map-filter-reduce.html"><meta property="og:description" content="How to use ramda's map, filter and reduce functions to filter and transform a list of popular films."><meta property="og:type" content="article"><meta property="twitter:site" content="Robert Pearce"><meta property="twitter:title" content="Ramda Chops: Map, Filter & Reduce"><meta property="twitter:description" content="How to use ramda's map, filter and reduce functions to filter and transform a list of popular films."><meta property="twitter:creator" content="@RobertWPearce"><link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ðŸ’¾</text></svg>"><link rel="canonical" href="https://robertwpearce.com/ramda-chops-map-filter-reduce.html"><link rel="alternate" href="./atom.xml" title="Robert Pearce's blog" type="application/atom+xml"><link rel="alternate" href="./rss.xml" title="Robert Pearce's blog" type="application/rss+xml"><link rel="stylesheet" href="./css/base.css"><link rel="stylesheet" href="./css/t-clean.css"><link rel="stylesheet" href="./css/t-clean-note.css"><link rel="stylesheet" href="./css/t-code-dracula.css"><link rel="prefetch" href="./css/t-clean-note.css"></head><body data-theme="clean-night"><script> (() => { window.site = { prefFont: localStorage.getItem('prefFont') || 'monospace', setFont: (family) => { localStorage.setItem('prefFont', family); const rootStyle = document.querySelector(':root').style; rootStyle.setProperty('--type-family-body', family+',monospace'); /* Remove when https://github.com/googlefonts/spacemono/pull/2 is resolved */ if (family === 'Liga Space Mono') { rootStyle.setProperty('font-feature-settings', '"liga" 0'); } else { rootStyle.removeProperty('font-feature-settings'); } return window.site._fetchFont(family); }, prefTheme: localStorage.getItem('prefTheme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'clean-night' : 'clean-day'), setTheme: (name) => { const rootStyle = document.querySelector(':root').style; if (name === 'clean-night') { rootStyle.removeProperty('color-scheme'); } else { rootStyle.setProperty('color-scheme', 'light'); } document.body.setAttribute('data-theme', name); localStorage.setItem('prefTheme', name); }, _fetchFont: (family) => { if (family === 'monospace') { return Promise.resolve(); } const familyNoSpaces = family.replaceAll(' ', ''); const fontz = [ new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Regular.woff2") format("woff2")', { display: 'swap', weight: 400 }), new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Bold.woff2") format("woff2")', { display: 'swap', weight: 700 }), ]; if (family !== 'Fira Code') { fontz.push( new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Italic.woff2") format("woff2")', { display: 'swap', style: 'italic', weight: 400 }), new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-BoldItalic.woff2") format("woff2")', { display: 'swap', style: 'italic', weight: 700 }) ); } for (const f of fontz) { document.fonts.add(f); } return Promise.allSettled(fontz).then(results => { results.forEach((res, i) => { if (res.status === 'rejected') { console.error('site failed to load font: ' + fontz[i]?.family ?? 'unknown'); } }); }); } }; window.site.setTheme(window.site.prefTheme); window.site.setFont(window.site.prefFont); })(); </script><header><nav><div class="nav-skip"><a href="#content">Skip to content</a></div><a aria-label="Home" class="nav-home" href="./">~</a><span>/</span></nav><div class="header-extra"><a href="./atom.xml">RSS</a><span aria-hidden="true">&compfn;</span><noscript>(requires JS &rarr;)</noscript><label for="select-theme">Theme</label><select data-select-theme id="select-theme"><option value="clean-day">Clean (Day)</option><option value="clean-night">Clean (Night)</option></select><span aria-hidden="true">&compfn;</span><label for="select-font">Font</label><select data-select-font id="select-font"><option value="monospace">monospace</option><option value="Liga Space Mono">Space Mono</option><option value="Victor Mono">Victor Mono</option><option value="Fira Code">Fira Code</option><option value="JetBrains Mono">JetBrains Mono</option></select></div></header><main id="content"><header data-area="heading"><h1>Ramda Chops: Map, Filter & Reduce</h1></header><section data-area="meta"><h2>Info</h2><table data-type="cols-y"><tbody><tr><th>Summary</th><td>How to use ramda's map, filter and reduce functions to filter and transform a list of popular films.</td></tr><tr><th>Shared</th><td>2018-02-08</td></tr></tbody></table></section><section data-area="note"><p><em>Thanks to <a href="https://github.com/jsilve">Jillian Silver</a>, <a href="https://patrickweakin.com">Patrick Eakin</a> and <a href="https://twitter.com/zerkms">@zerkms</a> for their review of this post.</em></p><p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map"><code>map</code></a>, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>filter</code></a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce"><code>reduce</code></a> methods on <code>Array.prototype</code> are essential to adopting a functional programming style in JavaScript, and in this post weâ€™re going to examine how to use these three concepts with <a href="http://ramdajs.com/">ramda.js</a>.</p><p>If you are unfamiliar with these three concepts, then be sure to first read the MDN documentation on each (linked above).</p><hr /><p><em>Pre-requisite ramda posts:</em></p><ul><li><a href="/ramda-chops-function-currying.html">Ramda Chops: Function Currying</a></li><li><a href="/ramda-chops-function-composition.html">Ramda Chops: Function Composition</a></li></ul><p><em>Other ramda posts:</em></p><ul><li><a href="/ramda-chops-safely-accessing-properties.html">Ramda Chops: Safely Accessing Properties</a></li></ul><h2 id="our-data-set-films">Our Data Set: Films!</h2><p>This is the test data set we will reference throughout the post:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">films</span> <span class="pl-o">=</span> <span class="pl-p">[</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">{</span> <span class="pl-nx">title</span><span class="pl-o">:</span> <span class="pl-s1">'The Empire Strikes Back'</span><span class="pl-p">,</span> <span class="pl-nx">rating</span><span class="pl-o">:</span> <span class="pl-mf">8.8</span> <span class="pl-p">},</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">{</span> <span class="pl-nx">title</span><span class="pl-o">:</span> <span class="pl-s1">'Pulp Fiction'</span><span class="pl-p">,</span> <span class="pl-nx">rating</span><span class="pl-o">:</span> <span class="pl-mf">8.9</span> <span class="pl-p">},</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">{</span> <span class="pl-nx">title</span><span class="pl-o">:</span> <span class="pl-s1">'The Deer Hunter'</span><span class="pl-p">,</span> <span class="pl-nx">rating</span><span class="pl-o">:</span> <span class="pl-mf">8.2</span> <span class="pl-p">},</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">{</span> <span class="pl-nx">title</span><span class="pl-o">:</span> <span class="pl-s1">'The Lion King'</span><span class="pl-p">,</span> <span class="pl-nx">rating</span><span class="pl-o">:</span> <span class="pl-mf">8.5</span> <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">]</span></span></span></code></pre><h2 id="our-goal">Our Goal</h2><p>There are a few conditions that are required for us to meet our goal. We must construct a function that: * only selects those with an 8.8 rating or higher * returns a list of the selected titles interpolated in an HTML string that has this structure: <code>html &lt;div&gt;TITLE: &lt;strong&gt;SCORE&lt;/strong&gt;&lt;/div&gt;</code></p><p>Given these requirements, a pseudotype signature for this might be:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// `output` takes in a list of films
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// and returns a list of HTML strings
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// output :: [Film] -&gt; [Html]
</span></span></span></code></pre><h2 id="step-1-get-the-html-part-working">Step 1: Get the HTML Part Working</h2><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-nx">films</span><span class="pl-p">.</span><span class="pl-nx">map</span><span class="pl-p">(</span><span class="pl-nx">film</span> <span class="pl-p">=&gt;</span> <span class="pl-sb">`&lt;div&gt;</span><span class="pl-si">${</span><span class="pl-nx">film</span><span class="pl-p">.</span><span class="pl-nx">title</span><span class="pl-si">}</span><span class="pl-sb">, &lt;strong&gt;</span><span class="pl-si">${</span><span class="pl-nx">film</span><span class="pl-p">.</span><span class="pl-nx">rating</span><span class="pl-si">}</span><span class="pl-sb">&lt;/strong&gt;&lt;/div&gt;`</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// =&gt; [
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//      "&lt;div&gt;The Empire Strikes Back, &lt;strong&gt;8.8&lt;/strong&gt;&lt;/div&gt;",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//      "&lt;div&gt;Pulp Fiction, &lt;strong&gt;8.9&lt;/strong&gt;&lt;/div&gt;",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//      "&lt;div&gt;The Deer Hunter, &lt;strong&gt;8.2&lt;/strong&gt;&lt;/div&gt;",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//      "&lt;div&gt;The Lion King, &lt;strong&gt;8.5&lt;/strong&gt;&lt;/div&gt;"
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//    ]
</span></span></span></code></pre><p><em><a href="https://goo.gl/mQmFBm">Try this code in the ramda REPL</a></em></p><h2 id="step-2-extract-the-map-callback">Step 2: Extract the <code>map</code> Callback</h2><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// filmHtml :: Film -&gt; Html
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-kr">const</span> <span class="pl-nx">filmHtml</span> <span class="pl-o">=</span> <span class="pl-nx">film</span> <span class="pl-p">=&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-sb">`&lt;div&gt;</span><span class="pl-si">${</span><span class="pl-nx">film</span><span class="pl-p">.</span><span class="pl-nx">title</span><span class="pl-si">}</span><span class="pl-sb">, &lt;strong&gt;</span><span class="pl-si">${</span><span class="pl-nx">film</span><span class="pl-p">.</span><span class="pl-nx">rating</span><span class="pl-si">}</span><span class="pl-sb">&lt;/strong&gt;&lt;/div&gt;`</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">films</span><span class="pl-p">.</span><span class="pl-nx">map</span><span class="pl-p">(</span><span class="pl-nx">filmHtml</span><span class="pl-p">)</span></span></span></code></pre><p><em><a href="https://goo.gl/C4a1kZ">Try this code in the ramda REPL</a></em></p><h2 id="step-3-filter-out-lower-scores">Step 3: <code>filter</code> Out Lower Scores</h2><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-nx">films</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">.</span><span class="pl-nx">filter</span><span class="pl-p">(</span><span class="pl-nx">x</span> <span class="pl-p">=&gt;</span> <span class="pl-nx">x</span><span class="pl-p">.</span><span class="pl-nx">rating</span> <span class="pl-o">&gt;=</span> <span class="pl-mf">8.8</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">.</span><span class="pl-nx">map</span><span class="pl-p">(</span><span class="pl-nx">filmHtml</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// =&gt; [
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//      "&lt;div&gt;The Empire Strikes Back, &lt;strong&gt;8.8&lt;/strong&gt;&lt;/div&gt;",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//      "&lt;div&gt;Pulp Fiction, &lt;strong&gt;8.9&lt;/strong&gt;&lt;/div&gt;",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//    ]
</span></span></span></code></pre><p><em><a href="https://goo.gl/yTxfKQ">Try this code in the ramda REPL</a></em></p><p>But wait! We can extract that <code>filter</code> callback, as well:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// hasHighScore :: Film -&gt; Bool
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-kr">const</span> <span class="pl-nx">hasHighScore</span> <span class="pl-o">=</span> <span class="pl-nx">x</span> <span class="pl-p">=&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">x</span><span class="pl-p">.</span><span class="pl-nx">rating</span> <span class="pl-o">&gt;=</span> <span class="pl-mf">8.8</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">films</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">.</span><span class="pl-nx">filter</span><span class="pl-p">(</span><span class="pl-nx">hasHighScore</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">.</span><span class="pl-nx">map</span><span class="pl-p">(</span><span class="pl-nx">filmHtml</span><span class="pl-p">)</span></span></span></code></pre><p><em><a href="https://goo.gl/qG4kZ7">Try this code in the ramda REPL</a></em></p><h2 id="step-4-composing-filter-and-map">Step 4: Composing <code>filter</code> and <code>map</code></h2><p>We can use ramdaâ€™s <a href="/ramda-chops-function-currying.html">function currying capabilities</a> and <a href="/ramda-chops-function-composition.html">function composition</a> to create some very clear and concise <a href="https://wiki.haskell.org/Pointfree">pointfree functions</a>.</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">import</span> <span class="pl-p">{</span> <span class="pl-nx">compose</span><span class="pl-p">,</span> <span class="pl-nx">filter</span><span class="pl-p">,</span> <span class="pl-nx">map</span> <span class="pl-p">}</span> <span class="pl-nx">from</span> <span class="pl-s1">'ramda'</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// output :: [Film] -&gt; [Html]
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-kr">const</span> <span class="pl-nx">output</span> <span class="pl-o">=</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">compose</span><span class="pl-p">(</span><span class="pl-nx">map</span><span class="pl-p">(</span><span class="pl-nx">filmHtml</span><span class="pl-p">),</span> <span class="pl-nx">filter</span><span class="pl-p">(</span><span class="pl-nx">hasHighScore</span><span class="pl-p">))</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">output</span><span class="pl-p">(</span><span class="pl-nx">films</span><span class="pl-p">)</span></span></span></code></pre><p><em><a href="https://goo.gl/7VMNTV">Try this code in the ramda REPL</a></em></p><p>One thing to remember with ramda functions (like <code>map</code> and <code>filter</code>) is that ramda typically orders arguments from least likely to change to most likely to change. Callback/transformation functions here are passed as the <em>first</em> argument, and the data comes last. To understand this further, check out the following links:</p><ul><li><a href="http://ramdajs.com/docs/#map">ramdaâ€™s documentation for <code>map</code></a></li><li><a href="http://ramdajs.com/docs/#filter">ramdaâ€™s documentation for <code>filter</code></a></li></ul><h2 id="step-5-extracting-the-composition-further">Step 5: Extracting The Composition Further</h2><p>If we want to not only reuse our filtering and mapping functions but also make them more readable, we can pull out the pieces that make up our <code>output</code> function into smaller bits:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// filmsToHtml :: [Film] -&gt; [Html]
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-kr">const</span> <span class="pl-nx">filmsToHtml</span> <span class="pl-o">=</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">map</span><span class="pl-p">(</span><span class="pl-nx">filmHtml</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// highScores :: [Film] -&gt; [Film]
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-kr">const</span> <span class="pl-nx">highScores</span> <span class="pl-o">=</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">filter</span><span class="pl-p">(</span><span class="pl-nx">hasHighScore</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// output :: [Film] -&gt; [Html]
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-kr">const</span> <span class="pl-nx">output</span> <span class="pl-o">=</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">compose</span><span class="pl-p">(</span><span class="pl-nx">filmsToHtml</span><span class="pl-p">,</span> <span class="pl-nx">highScores</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">output</span><span class="pl-p">(</span><span class="pl-nx">films</span><span class="pl-p">)</span></span></span></code></pre><p><em><a href="https://goo.gl/dFXCEK">Try this code in the ramda REPL</a></em></p><h2 id="step-6-another-way-with-reduce">Step 6: Another Way With <code>reduce</code></h2><p>We can accomplish the same goals as <code>filter</code> and <code>map</code> by making use of <code>reduce</code>.</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-nx">films</span><span class="pl-p">.</span><span class="pl-nx">reduce</span><span class="pl-p">((</span><span class="pl-nx">acc</span><span class="pl-p">,</span> <span class="pl-nx">x</span><span class="pl-p">)</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-k">return</span> <span class="pl-nx">hasHighScore</span><span class="pl-p">(</span><span class="pl-nx">x</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-o">?</span> <span class="pl-nx">acc</span><span class="pl-p">.</span><span class="pl-nx">concat</span><span class="pl-p">(</span><span class="pl-nx">filmHtml</span><span class="pl-p">(</span><span class="pl-nx">x</span><span class="pl-p">))</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-o">:</span> <span class="pl-nx">acc</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">},</span> <span class="pl-p">[])</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// or, for better performance
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">films</span><span class="pl-p">.</span><span class="pl-nx">reduce</span><span class="pl-p">((</span><span class="pl-nx">acc</span><span class="pl-p">,</span> <span class="pl-nx">x</span><span class="pl-p">)</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-k">if</span> <span class="pl-p">(</span><span class="pl-nx">hasHighScore</span><span class="pl-p">(</span><span class="pl-nx">x</span><span class="pl-p">))</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-nx">acc</span><span class="pl-p">.</span><span class="pl-nx">push</span><span class="pl-p">(</span><span class="pl-nx">filmHtml</span><span class="pl-p">(</span><span class="pl-nx">x</span><span class="pl-p">))</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-k">return</span> <span class="pl-nx">acc</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">},</span> <span class="pl-p">[])</span></span></span></code></pre><p><em><a href="https://goo.gl/b86Kdq">Try this code in the ramda REPL</a></em></p><p>If youâ€™re not familiar with reduce, be sure to play with the live example to better understand how those pieces work before moving on.</p><p>Itâ€™s also worth noting that you can do just about <em>anything</em> in JavaScript with the <code>reduce</code> function. I highly recommend going through <a href="https://twitter.com/kylehill">Kyle Hill</a>â€™s slides on <a href="https://omnifunction.herokuapp.com">reduce Is The Omnifunction</a>.</p><p>But wait! We can extract the <code>reduce</code> callback like we did with <code>map</code> and <code>filter</code> before:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// highScoresHtml :: ([Html], Film) -&gt; [Html]
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-kr">const</span> <span class="pl-nx">highScoresHtml</span> <span class="pl-o">=</span> <span class="pl-p">(</span><span class="pl-nx">acc</span><span class="pl-p">,</span> <span class="pl-nx">x</span><span class="pl-p">)</span> <span class="pl-p">=&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">hasHighScore</span><span class="pl-p">(</span><span class="pl-nx">x</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-o">?</span> <span class="pl-nx">acc</span><span class="pl-p">.</span><span class="pl-nx">concat</span><span class="pl-p">(</span><span class="pl-nx">filmHtml</span><span class="pl-p">(</span><span class="pl-nx">x</span><span class="pl-p">))</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-o">:</span> <span class="pl-nx">acc</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">films</span><span class="pl-p">.</span><span class="pl-nx">reduce</span><span class="pl-p">(</span><span class="pl-nx">highScoresHtml</span><span class="pl-p">,</span> <span class="pl-p">[])</span></span></span></code></pre><p><em><a href="https://goo.gl/F6NovJ">Try this code in the ramda REPL</a></em></p><h2 id="step-7-making-our-reduce-arguments-reusable">Step 7: Making Our Reduce Arguments Reusable</h2><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">import</span> <span class="pl-p">{</span> <span class="pl-nx">reduce</span> <span class="pl-p">}</span> <span class="pl-nx">from</span> <span class="pl-s1">'ramda'</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">output</span> <span class="pl-o">=</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">reduce</span><span class="pl-p">(</span><span class="pl-nx">highScoresHtml</span><span class="pl-p">,</span> <span class="pl-p">[])</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">output</span><span class="pl-p">(</span><span class="pl-nx">films</span><span class="pl-p">)</span></span></span></code></pre><p><em><a href="https://goo.gl/wjbAFY">Try this code in the ramda REPL</a></em></p><p>As before with <code>map</code> &amp; <code>filter</code>, <code>output</code> can be reused over and over again and passed any set of films to generate HTML for. To further understand the parameter order used here, check out the <a href="http://ramdajs.com/docs/#reduce">docs for ramdaâ€™s <code>reduce</code></a>.</p><hr /><p>This step-by-step process weâ€™ve walked through is as close to real-life refactoring/rethinking as I could do in a post. Thanks for making it this far.</p><p>Until next time, <br /> Robert</p></section></main><footer><span aria-hidden="true" class="heart">â™¥</span><span aria-hidden="true">&rarr;</span><a href="https://github.com/sponsors/rpearce/">Sponsor my work</a><span aria-hidden="true">&larr;</span><span aria-hidden="true" class="heart">â™¥</span></footer><script async> (() => { const themeEl = document.querySelector('[data-select-theme]'); if (themeEl) { themeEl.querySelector('[value="'+window.site.prefTheme+'"]').selected = 'selected'; themeEl.addEventListener('change', e => { window.site.setTheme(e.target.value); }); } const fontEl = document.querySelector('[data-select-font]'); if (fontEl) { fontEl.querySelector('[value="'+window.site.prefFont+'"]').selected = 'selected'; fontEl.addEventListener('change', e => { window.site.setFont(e.target.value); }) } })(); </script></body></html>