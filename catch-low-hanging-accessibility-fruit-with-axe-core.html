<!DOCTYPE html><html lang="en"><head><title>Catch Low-Hanging Accessibility Fruit with axe-core</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Automate away easy-to-catch accessibility issues"><meta name="author" content="Robert Pearce"><meta name="keywords" content="javascript, accessibility, a11y, testing, axe-core"><meta name="google-site-verification" content="QX4bn65yOXBfgnwxlO09yIBc1H8blur-Erx3lmsDVhU"><meta http-equiv="origin-trial" content="Am4BZ0c7GMyB72dgo/Ny2FfIFscXhYMoN+CVe4jduWh24FvsaCwf7kjZzHzfrJXtIilyZVAEKRxOItGLY7lvkAgAAABSeyJvcmlnaW4iOiJodHRwczovL3JvYmVydHdwZWFyY2UuY29tOjQ0MyIsImZlYXR1cmUiOiJQb3J0YWxzIiwiZXhwaXJ5IjoxNjAzNTQ2NDc3fQ=="><meta property="og:site_name" content="Robert Pearce"><meta property="og:title" content="Catch Low-Hanging Accessibility Fruit with axe-core"><meta property="og:url" content="https://robertwpearce.com/catch-low-hanging-accessibility-fruit-with-axe-core.html"><meta property="og:description" content="Automate away easy-to-catch accessibility issues"><meta property="og:type" content="article"><meta property="twitter:site" content="Robert Pearce"><meta property="twitter:title" content="Catch Low-Hanging Accessibility Fruit with axe-core"><meta property="twitter:description" content="Automate away easy-to-catch accessibility issues"><meta property="twitter:creator" content="@RobertWPearce"><link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ðŸ’¾</text></svg>"><link rel="canonical" href="https://robertwpearce.com/catch-low-hanging-accessibility-fruit-with-axe-core.html"><link rel="alternate" href="./atom.xml" title="Robert Pearce's blog" type="application/atom+xml"><link rel="alternate" href="./rss.xml" title="Robert Pearce's blog" type="application/rss+xml"><link rel="stylesheet" href="./css/base.css"><link rel="stylesheet" href="./css/t-clean.css"><link rel="stylesheet" href="./css/t-clean-note.css"><link rel="stylesheet" href="./css/t-code-dracula.css"><link rel="prefetch" href="./css/t-clean-note.css"></head><body data-theme="clean-night"><script> (() => { window.site = { prefFont: localStorage.getItem('prefFont') || 'monospace', setFont: (family) => { localStorage.setItem('prefFont', family); const rootStyle = document.querySelector(':root').style; rootStyle.setProperty('--type-family-body', family+',monospace'); /* Remove when https://github.com/googlefonts/spacemono/pull/2 is resolved */ if (family === 'Liga Space Mono') { rootStyle.setProperty('font-feature-settings', '"liga" 0'); } else { rootStyle.removeProperty('font-feature-settings'); } return window.site._fetchFont(family); }, prefTheme: localStorage.getItem('prefTheme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'clean-night' : 'clean-day'), setTheme: (name) => { const rootStyle = document.querySelector(':root').style; if (name === 'clean-night') { rootStyle.removeProperty('color-scheme'); } else { rootStyle.setProperty('color-scheme', 'light'); } document.body.setAttribute('data-theme', name); localStorage.setItem('prefTheme', name); }, _fetchFont: (family) => { if (family === 'monospace') { return Promise.resolve(); } const familyNoSpaces = family.replaceAll(' ', ''); const fontz = [ new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Regular.woff2") format("woff2")', { display: 'swap', weight: 400 }), new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Bold.woff2") format("woff2")', { display: 'swap', weight: 700 }), ]; if (family !== 'Fira Code') { fontz.push( new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Italic.woff2") format("woff2")', { display: 'swap', style: 'italic', weight: 400 }), new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-BoldItalic.woff2") format("woff2")', { display: 'swap', style: 'italic', weight: 700 }) ); } for (const f of fontz) { document.fonts.add(f); } return Promise.allSettled(fontz).then(results => { results.forEach((res, i) => { if (res.status === 'rejected') { console.error('site failed to load font: ' + fontz[i]?.family ?? 'unknown'); } }); }); } }; window.site.setTheme(window.site.prefTheme); window.site.setFont(window.site.prefFont); })(); </script><header><nav><div class="nav-skip"><a href="#content">Skip to content</a></div><a aria-label="Home" class="nav-home" href="./">~</a><span>/</span></nav><div class="header-extra"><a href="./atom.xml">RSS</a><span aria-hidden="true">&compfn;</span><noscript>(requires JS &rarr;)</noscript><label for="select-theme">Theme</label><select data-select-theme id="select-theme"><option value="clean-day">Clean (Day)</option><option value="clean-night">Clean (Night)</option></select><span aria-hidden="true">&compfn;</span><label for="select-font">Font</label><select data-select-font id="select-font"><option value="monospace">monospace</option><option value="Liga Space Mono">Space Mono</option><option value="Victor Mono">Victor Mono</option><option value="Fira Code">Fira Code</option><option value="JetBrains Mono">JetBrains Mono</option></select></div></header><main id="content"><header data-area="heading"><h1>Catch Low-Hanging Accessibility Fruit with axe-core</h1></header><section data-area="meta"><h2>Info</h2><table data-type="cols-y"><tbody><tr><th>Summary</th><td>Automate away easy-to-catch accessibility issues</td></tr><tr><th>Shared</th><td>2020-02-24</td></tr></tbody></table></section><section data-area="note"><p><a href="https://www.deque.com">Deque Systems</a>, in addition to having <a href="https://www.deque.com/axe/axe-for-web/">an accessibility-testing browser plugin</a>, has an open source package, <a href="https://www.npmjs.com/package/axe-core">axe-core</a>, that can help you determine if HTML contains obvious accessibility issues.</p><p>That tool can be used on its own in your tests, or you can turn it into a <code>Promise</code> and use it like this!</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">import</span> <span class="pl-nx">axe</span> <span class="pl-nx">from</span> <span class="pl-s1">'axe-core'</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">isA11y</span> <span class="pl-o">=</span> <span class="pl-nx">html</span> <span class="pl-p">=&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-k">new</span> <span class="pl-nb">Promise</span><span class="pl-p">((</span><span class="pl-nx">resolve</span><span class="pl-p">,</span> <span class="pl-nx">reject</span><span class="pl-p">)</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-nx">axe</span><span class="pl-p">.</span><span class="pl-nx">run</span><span class="pl-p">(</span><span class="pl-nx">html</span><span class="pl-p">,</span> <span class="pl-p">{},</span> <span class="pl-p">(</span><span class="pl-nx">err</span><span class="pl-p">,</span> <span class="pl-nx">result</span><span class="pl-o">=</span><span class="pl-p">{})</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-kr">const</span> <span class="pl-p">{</span> <span class="pl-nx">violations</span><span class="pl-o">=</span><span class="pl-p">[]</span> <span class="pl-p">}</span> <span class="pl-o">=</span> <span class="pl-nx">result</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-k">if</span> <span class="pl-p">(</span><span class="pl-nx">err</span><span class="pl-p">)</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-nx">reject</span><span class="pl-p">(</span><span class="pl-nx">err</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-p">}</span> <span class="pl-k">else</span> <span class="pl-k">if</span> <span class="pl-p">(</span><span class="pl-nx">violations</span><span class="pl-p">.</span><span class="pl-nx">length</span> <span class="pl-o">&gt;</span> <span class="pl-mi">0</span><span class="pl-p">)</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-nx">reject</span><span class="pl-p">(</span><span class="pl-nx">violations</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-p">}</span> <span class="pl-k">else</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">        <span class="pl-c1">// Uncomment to view incomplete/unavailable tests &amp; why
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span>        <span class="pl-c1">//console.log(result.incomplete)
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span>        <span class="pl-nx">resolve</span><span class="pl-p">(</span><span class="pl-kc">true</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">})</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">})</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">test</span><span class="pl-p">(</span><span class="pl-s1">'bad form'</span><span class="pl-p">,</span> <span class="pl-kr">async</span> <span class="pl-p">()</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-kr">const</span> <span class="pl-nx">wrap</span> <span class="pl-o">=</span> <span class="pl-nb">document</span><span class="pl-p">.</span><span class="pl-nx">createElement</span><span class="pl-p">(</span><span class="pl-s1">'div'</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">wrap</span><span class="pl-p">.</span><span class="pl-nx">innerHTML</span> <span class="pl-o">=</span> <span class="pl-sb">`
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-sb">    &lt;form&gt;
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-sb">      &lt;div&gt;Enter your name&lt;/div&gt;
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-sb">      &lt;input type="text" /&gt;
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-sb">      &lt;button type="submit"&gt;Submit&lt;/button&gt;
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-sb">    &lt;/form&gt;
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-sb">  `</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nb">document</span><span class="pl-p">.</span><span class="pl-nx">body</span><span class="pl-p">.</span><span class="pl-nx">appendChild</span><span class="pl-p">(</span><span class="pl-nx">wrap</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">expect</span><span class="pl-p">(</span><span class="pl-kr">await</span> <span class="pl-nx">isA11y</span><span class="pl-p">(</span><span class="pl-nx">wrap</span><span class="pl-p">)).</span><span class="pl-nx">toEqual</span><span class="pl-p">(</span><span class="pl-kc">true</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">})</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// Failed: Array [
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//   Object {
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//     "description": "Ensures every form element has a label",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//     "help": "Form elements must have labels",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//     "helpUrl": "https://dequeuniversity.com/rules/axe/3.5/label?application=axeAPI",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//     "id": "label",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//     "impact": "critical",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//     "nodes": Array [
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//       [Object],
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//     ],
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//     "tags": Array [
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//       "cat.forms",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//       "wcag2a",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//       "wcag332",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//       "wcag131",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//       "section508",
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//       "section508.22.n"
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//     ],
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//   }
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">//  ]
</span></span></span></code></pre><p>It can detect all sorts of accessibility issues, so long as the environment in which itâ€™s being tested supports the browser features used in <code>axe-core</code>â€™s tests. For example, <code>jsdom</code>, which <code>jest</code> uses as its browser mocking engine, <a href="https://github.com/jsdom/jsdom/pull/2719">only recently added some support for <code>Range</code></a>, it seems there are still some aspects missing, and this prevents <code>axe-core</code> from being able to test things like the accessibility of text color on certain backgrounds.</p><p>That said, the sheer number of issues that can be caught with this tool is staggering. If you work with tools like React and combine this with Dequeâ€™s <a href="https://github.com/dequelabs/react-axe"><code>react-axe</code></a> tool and <a href="https://github.com/evcohen/eslint-plugin-jsx-a11y"><code>eslint-plugin-jsx-a11y</code></a>, you are sure to catch heaps of issues you might accidentally overlook. Note, however, that these tools are not replacements for real accessibility testing.</p><p>Here is an example in a real OSS project of mine that uses this <code>axe-core</code> technique with <code>@testing-library/react</code>: <a href="https://github.com/rpearce/react-medium-image-zoom/blob/6721f87370d968361d9d0d14cd30d752832877d1/__tests__/Uncontrolled.js#L27" class="uri">https://github.com/rpearce/react-medium-image-zoom/blob/6721f87370d968361d9d0d14cd30d752832877d1/__tests__/Uncontrolled.js#L27</a>.</p><hr /><p>If you are using <code>jest</code> and want a custom matcher, there is a project, <a href="https://github.com/nickcolley/jest-axe"><code>jest-axe</code></a>, that allows you to do so:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// from https://github.com/nickcolley/jest-axe#usage
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-kr">const</span> <span class="pl-p">{</span> <span class="pl-nx">axe</span><span class="pl-p">,</span> <span class="pl-nx">toHaveNoViolations</span> <span class="pl-p">}</span> <span class="pl-o">=</span> <span class="pl-nx">require</span><span class="pl-p">(</span><span class="pl-s1">'jest-axe'</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">expect</span><span class="pl-p">.</span><span class="pl-nx">extend</span><span class="pl-p">(</span><span class="pl-nx">toHaveNoViolations</span><span class="pl-p">)</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">it</span><span class="pl-p">(</span><span class="pl-s1">'should demonstrate this matcher`s usage'</span><span class="pl-p">,</span> <span class="pl-kr">async</span> <span class="pl-p">()</span> <span class="pl-p">=&gt;</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-kr">const</span> <span class="pl-nx">render</span> <span class="pl-o">=</span> <span class="pl-p">()</span> <span class="pl-p">=&gt;</span> <span class="pl-s1">'&lt;img src="#"/&gt;'</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-c1">// pass anything that outputs html to axe
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span>  <span class="pl-kr">const</span> <span class="pl-nx">html</span> <span class="pl-o">=</span> <span class="pl-nx">render</span><span class="pl-p">()</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">expect</span><span class="pl-p">(</span><span class="pl-kr">await</span> <span class="pl-nx">axe</span><span class="pl-p">(</span><span class="pl-nx">html</span><span class="pl-p">)).</span><span class="pl-nx">toHaveNoViolations</span><span class="pl-p">()</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">})</span></span></span></code></pre><hr /><p>Thank you for reading! <br /> Robert</p></section></main><footer><span aria-hidden="true" class="heart">â™¥</span><span aria-hidden="true">&rarr;</span><a href="https://github.com/sponsors/rpearce/">Sponsor my work</a><span aria-hidden="true">&larr;</span><span aria-hidden="true" class="heart">â™¥</span></footer><script async> (() => { const themeEl = document.querySelector('[data-select-theme]'); if (themeEl) { themeEl.querySelector('[value="'+window.site.prefTheme+'"]').selected = 'selected'; themeEl.addEventListener('change', e => { window.site.setTheme(e.target.value); }); } const fontEl = document.querySelector('[data-select-font]'); if (fontEl) { fontEl.querySelector('[value="'+window.site.prefFont+'"]').selected = 'selected'; fontEl.addEventListener('change', e => { window.site.setFont(e.target.value); }) } })(); </script></body></html>