<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Immediate Functions</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Beginner-friendly introduction to immediate functions.">
    <meta name="author" content="Robert Pearce">
    <meta name="keywords" content="javascript, javascript tutorial, immediate functions, IIFE, kelvin to fahrenheit">
    <meta name="google-site-verification" content="QX4bn65yOXBfgnwxlO09yIBc1H8blur-Erx3lmsDVhU">

    <meta property="og:site_name" content="Robert Pearce | Freelance Software Developer">
    <meta property="og:title" content="Immediate Functions">
    <meta property="og:url" content="https://robertwpearce.com/immediate-functions.html">
    <meta property="og:description" content="Beginner-friendly introduction to immediate functions.">
    <meta property="og:image" content="https://robertwpearce.com/images/sunrise.jpg">
    
      <meta property="og:type" content="article">
    

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:site" content="Robert Pearce | Freelance Software Developer">
    <meta property="twitter:title" content="Immediate Functions">
    <meta property="twitter:description" content="Beginner-friendly introduction to immediate functions.">
    <meta property="twitter:image" content="https://robertwpearce.com/images/sunrise.jpg">
    <meta property="twitter:creator" content="@RobertWPearce">

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="canonical" href="https://robertwpearce.com/immediate-functions.html">
    <link rel="stylesheet" href="/css/default.css" />
    
      <link rel="stylesheet" href="/css/article.css" />
    
  </head>
  <body class="light">
    <nav class="nav">
  <div class="layout--constrained">
    <a class="nav__link nav__skip" href="#content">Skip to content</a>
    <a class="nav__link" href="/">Home</a>
    <a class="nav__link" href="mailto:me@robertwpearce.com?subject=Work Inquiry">Hire Me</a>
    <a class="nav__link" href="/atom.xml">atom</a>
    <a class="nav__link" href="/rss.xml">rss</a>
  </div>
</nav>


<main id="content" tabindex="-1">
  <article class="article">
    <header class="article__bg" style="background-image: url('/images/sunrise.jpg')">
      <div class="article__bgHeader">
        <div class="layout--constrained">
          <div class="article__bgTitleWrap">
            <h1 class="article__bgTitle">
              <a href="/immediate-functions.html">Immediate Functions</a>
            </h1>
            <div class="article__bgSubHeader">
              <small class="italic">2015-10-06</small>
              
              
            </div>
          </div>
        </div>
      </div>
    </header>
    <section class="layout--constrained">
      <header class="article__header">
        <h1 class="article__title">
          <a href="/immediate-functions.html">Immediate Functions</a>
        </h1>
        <small class="italic">2015-10-06</small>
        
      </header>
      <p><em>This article is intended for JavaScript beginners.</em></p>
<p>The browser environment is one big JavaScript <code>closure</code> that will encapsulate in its <code>scope</code> all of the code that is to be run. Because of this, any functions or variables that are created in <code>&lt;script&gt;</code> tags or external <code>.js</code> files that are <em>not</em> defined within a function will end up as global variables! And we all know that global varibles are bad. Let’s dig in to this some more.</p>
<p>Every time you define a function and then define a variable with <code>var</code> inside of that function, that variable <em>only</em> exists inside of that function. For example, what is the value of <code>result</code> that is logged to the console?</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1"></a><span class="co">// app.js</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">function</span> <span class="at">kelvinToFahrenheit</span>(kelvin) <span class="op">{</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>  <span class="kw">var</span> result <span class="op">=</span> <span class="va">Math</span>.<span class="at">round</span>(kelvin <span class="op">*</span> (<span class="dv">9</span><span class="op">/</span><span class="dv">5</span>) <span class="op">-</span> <span class="fl">459.67</span>)<span class="op">;</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="op">}</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="at">kelvinToFahrenheit</span>(<span class="fl">274.3</span>)<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="va">console</span>.<span class="at">log</span>(result)<span class="op">;</span></span></code></pre></div>
<p>The correct answer would be <code>undefined</code> (with a nice error), for <code>result</code> only exists within the <code>scope</code> of the <code>kelvinToFahrenheit</code> function. However, the function <code>kelvinToFahrenheit</code> now exists globally.</p>
<p>Why does this matter? Well, when you include a script on to a web page, its code now becomes part of this global closure. So if you define <code>function kelvinToFahrenheit()</code> without giving it a separate closure or namespace (more on namespaces in a second), then it is now a “global function,” meaning that it exists in the global namespace. If any other library you ever include uses a variable called <code>router</code>, your variable (or that library’s) is going to overwrite whichever came before it and cause massive issues. The same thing is true for variables:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">// app.js</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw">var</span> currentTempInKelvin <span class="op">=</span> <span class="fl">294.11</span><span class="op">;</span></span></code></pre></div>
<p>So what are your options?</p>
<h2 id="immediately-invoked-function-expressions-iifes">Immediately Invoked Function Expressions (IIFEs)</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">// app.js</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="op">;</span>(<span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="co">// your code here</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="op">}</span>)()<span class="op">;</span></span></code></pre></div>
<p>The semi-colon here is a defensive technique used for when files are concatenated together–if somebody in one file forgets to close their file/library/definition out with a semi-colon, then your code is going to be an extension of theirs.</p>
<p>The <code>()</code> towards the end is nothing more than the invocation of the immediate function we’ve defined.</p>
<p>Thus, when you write</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1"></a><span class="co">// app.js</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="op">;</span>(<span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="kw">var</span> currentTempInKelvin <span class="op">=</span> <span class="fl">294.11</span><span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="op">}</span>)()<span class="op">;</span></span></code></pre></div>
<p>and then you try to <code>console.log(currentTempInKelvin);</code> from the browser’s JavaScript console, you will get <code>undefined</code>, for <code>currentTempInKelvin</code> now only exists within that anonymous function’s scope. Hurray! No more globals.</p>
<hr />
<p>But what if we want to access something in a global fashion? We know about the problems of name-clashing, so let’s also try to reduce that. Let’s combine what you did with the immediate function and do global variables in a less-bad way using <em>namespacing</em>.</p>
<h2 id="namespacing">Namespacing</h2>
<p>Namespacing allows us to limit our use of global variables to one global by nesting all of our functionality within one global object that we’ll call <code>WeatherApp</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">// app.js</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">// No var declaration means global!</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="op">;</span>(<span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>  WeatherApp <span class="op">=</span> <span class="op">{</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>    <span class="dt">kelvinToFahrenheit</span><span class="op">:</span> <span class="op">{}</span></span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="op">};</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="op">}</span>)()<span class="op">;</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1"></a><span class="co">// app.js</span></span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="op">;</span>(<span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  WeatherApp <span class="op">=</span> <span class="op">{};</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="va">WeatherApp</span>.<span class="at">kelvinToFahrenheit</span> <span class="op">=</span> <span class="op">{};</span></span>
<span id="cb6-5"><a href="#cb6-5"></a><span class="op">}</span>)()<span class="op">;</span></span></code></pre></div>
<p>or (better)</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb7-1"><a href="#cb7-1"></a><span class="co">// app.js</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="op">;</span>(<span class="kw">function</span>() <span class="op">{</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="va">window</span>.<span class="at">WeatherApp</span> <span class="op">=</span> <span class="op">{};</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="va">window</span>.<span class="va">WeatherApp</span>.<span class="at">kelvinToFahrenheit</span> <span class="op">=</span> <span class="op">{};</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="op">}</span>)()<span class="op">;</span></span></code></pre></div>
<p>or (recommended)</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb8-1"><a href="#cb8-1"></a><span class="co">// app.js</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="op">;</span>(<span class="kw">function</span>(scope) <span class="op">{</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="va">scope</span>.<span class="at">WeatherApp</span> <span class="op">=</span> <span class="op">{};</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="va">scope</span>.<span class="va">WeatherApp</span>.<span class="at">router</span> <span class="op">=</span> <span class="op">{};</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="op">}</span>)(<span class="kw">this</span>)<span class="op">;</span></span></code></pre></div>
<p>This last method allows you to use this code and pass in any contextual scope. Since <code>this</code> is equivalent to <code>window</code> at the global level, when you run this in the browser, <code>this</code> is <code>window</code>, so <code>WeatherApp</code> will be added to the <code>window</code> global.</p>
<p>When you leave out the <code>var</code>, you create a global variable, so be careful! I recommend being explicit with to what object you are adding a <code>namespace</code>. If you’re going the global variable route, then you should nest every single thing you’re doing inside of your <code>WeatherApp</code> namespace in order to avoid having more than 1 global variable.</p>
<h2 id="conclusion">Conclusion</h2>
<p>This is a great pattern to utilize when you have relatively simple JavaScript you would like to add to a webpage and not have its contents clash with other libraries &amp; code. If your code begins to get too complicated for this file, then we can start to look at the <a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS module exporting &amp; requiring pattern</a> that is currently implemented by the wonderful <a href="http://browserify.org">Browserify</a> library (aka, Node.js but in the browser). I will cover this in the future, but in the mean time, leverage the power of immediate functions for great good!</p>
    </section>
  </article>
</main>

<footer>
  <section class="subscribe section--padded">
  <div class="layout--constrained">
    <h2 class="subscribe__header">Get notified of new posts</h2>

    <form action="//robertwpearce.us13.list-manage.com/subscribe/post?u=2df44e8960266388bff165fa6&amp;id=ee2f2a3737" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate class="subscribe__form">
      <div id="mce-responses">
        <div class="response" id="mce-error-response" style="display:none"></div>
        <div class="response" id="mce-success-response" style="display:none"></div>
      </div>
      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_2df44e8960266388bff165fa6_ee2f2a3737" tabindex="-1" value=""></div>
      <div class="subscribe__section">
        <input type="email" value="" id="mce-EMAIL" class="subscribe__input" name="EMAIL" placeholder="you@greatemail.com" aria-label="Email Address">
        <input type="submit" value="Subscribe" name="subscribe" class="subscribe__submit">
      </div>
      <small>Note: I will <em>never</em> give out your email nor spam you. Unsubscribe at any time.</small>
    </form>

    <p>
      <small>(or subscribe to the <a href="/atom.xml" class="subscribe__link">atom</a> or <a class="subscribe__link" href="/rss.xml">rss</a> feeds)</small>
    </p>
  </div>
</section>

</footer>

  </body>
</html>
