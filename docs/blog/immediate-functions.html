<!DOCTYPE html><html lang="en"><head><title>Immediate Functions</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta name="description" content="Beginner-friendly introduction to immediate functions."><meta property="og:site_name" content="Robert Pearce | Freelance Software Developer"><meta property="og:title" content="Immediate Functions"><meta property="og:url" content="https://robertwpearce.com/blog/immediate-functions.html"><meta property="og:description" content="Beginner-friendly introduction to immediate functions."><meta property="og:image" content="/images/sunrise.jpg"><meta property="og:type" content="article"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://robertwpearce.com/blog/immediate-functions.html"><link rel="stylesheet" href="/styles.css"><meta name="google-site-verification" content="QX4bn65yOXBfgnwxlO09yIBc1H8blur-Erx3lmsDVhU"><link href="//fonts.googleapis.com/css?family=Lato:400" rel="stylesheet" type="text/css"></head><body><main><nav><div class="layout--constrained"><ul class="nav--main list--bare list--horz"><li><a href="/">Home</a></li><li><a href="mailto:me@robertwpearce.com?subject=Work Inquiry">Hire Me</a></li></ul></div></nav><article class="article"><div class="article__background" style="background-image: url('/images/sunrise.jpg')"><div class="overlay"></div><header class="article__backgroundHeader"><div class="layout--constrained"><h1 class="heading--trim"><a href="/blog/immediate-functions.html">Immediate Functions</a></h1><div class="article__subHeader"><small>Oct 6, 2015</small></div></div></header></div><div class="layout--constrained"><header class="article__header heading--fatBottomBorder"><h1 class="heading--trim"><a href="/blog/immediate-functions.html">Immediate Functions</a></h1><small>Oct 6, 2015</small></header><p><em>This article is intended for JavaScript beginners.</em></p><p>The browser environment is one big JavaScript <code>closure</code> that will encapsulate in its <code>scope</code> all of the code that is to be run. Because of this, any functions or variables that are created in <code>&lt;script&gt;</code> tags or external <code>.js</code> files that are <em>not</em> defined within a function will end up as global variables! And we all know that global varibles are bad. Let&#39;s dig in to this some more.</p><p>Every time you define a function and then define a variable with <code>var</code> inside of that function, that variable <em>only</em> exists inside of that function. For example, what is the value of <code>result</code> that is logged to the console?</p><pre><code class="lang-js"><span class="token comment" spellcheck="true">// app.js</span>
<span class="token keyword">function</span> <span class="token function">kelvinToFahrenheit</span><span class="token punctuation">(</span>kelvin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>kelvin <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token operator">/</span><span class="token number">5</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">459.67</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">kelvinToFahrenheit</span><span class="token punctuation">(</span><span class="token number">274.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>The correct answer would be <code>undefined</code> (with a nice error), for <code>result</code> only exists within the <code>scope</code> of the <code>kelvinToFahrenheit</code> function. However, the function <code>kelvinToFahrenheit</code> now exists globally.</p><p>Why does this matter? Well, when you include a script on to a web page, its code now becomes part of this global closure. So if you define <code>function kelvinToFahrenheit()</code> without giving it a separate closure or namespace (more on namespaces in a second), then it is now a &quot;global function,&quot; meaning that it exists in the global namespace. If any other library you ever include uses a variable called <code>router</code>, your variable (or that library&#39;s) is going to overwrite whichever came before it and cause massive issues. The same thing is true for variables:</p><pre><code class="lang-js"><span class="token comment" spellcheck="true">// app.js</span>
<span class="token keyword">var</span> currentTempInKelvin <span class="token operator">=</span> <span class="token number">294.11</span><span class="token punctuation">;</span>
</code></pre><p>So what are your options?</p><h2 id="immediately-invoked-function-expressions-iifes-">Immediately Invoked Function Expressions (IIFEs)</h2><pre><code class="lang-js"><span class="token comment" spellcheck="true">// app.js</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// your code here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>The semi-colon here is a defensive technique used for when files are concatenated together--if somebody in one file forgets to close their file/library/definition out with a semi-colon, then your code is going to be an extension of theirs.</p><p>The <code>()</code> towards the end is nothing more than the invocation of the immediate function we&#39;ve defined.</p><p>Thus, when you write</p><pre><code class="lang-js"><span class="token comment" spellcheck="true">// app.js</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> currentTempInKelvin <span class="token operator">=</span> <span class="token number">294.11</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>and then you try to <code>console.log(currentTempInKelvin);</code> from the browser&#39;s JavaScript console, you will get <code>undefined</code>, for <code>currentTempInKelvin</code> now only exists within that anonymous function&#39;s scope. Hurray! No more globals.</p><hr><p>But what if we want to access something in a global fashion? We know about the problems of name-clashing, so let&#39;s also try to reduce that. Let&#39;s combine what you did with the immediate function and do global variables in a less-bad way using <em>namespacing</em>.</p><h2 id="namespacing">Namespacing</h2><p>Namespacing allows us to limit our use of global variables to one global by nesting all of our functionality within one global object that we&#39;ll call <code>WeatherApp</code>.</p><pre><code class="lang-js"><span class="token comment" spellcheck="true">// app.js</span>
<span class="token comment" spellcheck="true">// No var declaration means global!</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  WeatherApp <span class="token operator">=</span> <span class="token punctuation">{</span>
    kelvinToFahrenheit<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>or</p><pre><code class="lang-js"><span class="token comment" spellcheck="true">// app.js</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  WeatherApp <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  WeatherApp<span class="token punctuation">.</span>kelvinToFahrenheit <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>or (better)</p><pre><code class="lang-js"><span class="token comment" spellcheck="true">// app.js</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>WeatherApp <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  window<span class="token punctuation">.</span>WeatherApp<span class="token punctuation">.</span>kelvinToFahrenheit <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>or (recommended)</p><pre><code class="lang-js"><span class="token comment" spellcheck="true">// app.js</span>
<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>scope<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  scope<span class="token punctuation">.</span>WeatherApp <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  scope<span class="token punctuation">.</span>WeatherApp<span class="token punctuation">.</span>router <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>This last method allows you to use this code and pass in any contextual scope. Since <code>this</code> is equivalent to <code>window</code> at the global level, when you run this in the browser, <code>this</code> is <code>window</code>, so <code>WeatherApp</code> will be added to the <code>window</code> global.</p><p>When you leave out the <code>var</code>, you create a global variable, so be careful! I recommend being explicit with to what object you are adding a <code>namespace</code>. If you&#39;re going the global variable route, then you should nest every single thing you&#39;re doing inside of your <code>WeatherApp</code> namespace in order to avoid having more than 1 global variable.</p><h2 id="conclusion">Conclusion</h2><p>This is a great pattern to utilize when you have relatively simple JavaScript you would like to add to a webpage and not have its contents clash with other libraries &amp; code. If your code begins to get too complicated for this file, then we can start to look at the <a href="http://wiki.commonjs.org/wiki/Modules/1.1">CommonJS module exporting &amp; requiring pattern</a> that is currently implemented by the wonderful <a href="http://browserify.org">Browserify</a> library (aka, Node.js but in the browser). I will cover this in the future, but in the mean time, leverage the power of immediate functions for great good!</p></div></article><section class="section--padded bg--gray"><div class="layout--constrained"><h2>Get Updates</h2><!-- Begin MailChimp Signup Form --><form action="//robertwpearce.us13.list-manage.com/subscribe/post?u=2df44e8960266388bff165fa6&amp;id=ee2f2a3737" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate class="form"><div id="mce-responses"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div style="position: absolute; left: -5000px" aria-hidden="true"><input type="text" name="b_2df44e8960266388bff165fa6_ee2f2a3737" tabindex="-1" value=""></div><div class="form__container"><label for="mce-EMAIL" class="form__label">Email Address</label><input type="email" value="" id="mce-EMAIL" class="form__input" name="EMAIL" placeholder="you@greatemail.com"> <input type="submit" value="Subscribe" name="subscribe" class="form__submit"></div><small>Note: I will <em>never</em> give out your email nor spam you. Unsubscribe at any time.</small></form><!--End mc_embed_signup--></div></section></main></body></html>