<!DOCTYPE html><html lang="en"><head><title>Ramda Chops: Safely Accessing Properties</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1"><meta name="description" content="Get introduced to ramda's prop, propOr, path & pathOr functions."><meta property="og:site_name" content="Robert Pearce | Freelance Software Developer"><meta property="og:title" content="Ramda Chops: Safely Accessing Properties"><meta property="og:url" content="https://robertwpearce.com/blog/ramda-chops-safely-accessing-properties.html"><meta property="og:description" content="Get introduced to ramda's prop, propOr, path & pathOr functions."><meta property="og:image" content="/images/sheep-countryside.jpg"><meta property="og:type" content="article"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="Robert Pearce | Freelance Software Developer"><meta property="twitter:title" content="Ramda Chops: Safely Accessing Properties"><meta property="twitter:description" content="Get introduced to ramda's prop, propOr, path & pathOr functions."><meta property="twitter:image" content="/images/sheep-countryside.jpg"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://robertwpearce.com/blog/ramda-chops-safely-accessing-properties.html"><link rel="stylesheet" href="/styles.css"><meta name="google-site-verification" content="QX4bn65yOXBfgnwxlO09yIBc1H8blur-Erx3lmsDVhU"><link href="//fonts.googleapis.com/css?family=Lato:400" rel="stylesheet" type="text/css"></head><body><main><nav><div class="layout--constrained"><ul class="nav--main list--bare list--horz"><li><a href="/">Home</a></li><li><a href="mailto:me@robertwpearce.com?subject=Work Inquiry">Hire Me</a></li></ul></div></nav><article class="article"><div class="article__background" style="background-image: url('/images/sheep-countryside.jpg')"><header class="article__bgHeader"><div class="layout--constrained"><div class="article__bgTitleContainer"><h1 class="heading--trim"><a href="/blog/ramda-chops-safely-accessing-properties.html">Ramda Chops: Safely Accessing Properties</a></h1><div class="article__subHeader"><small>Jan 31, 2018</small> <small class="photoCred">[photo credit <a href="https://unsplash.com/@hilesy">George Hiles</a>]</small></div></div></div></header></div><div class="layout--constrained"><header class="article__header heading--fatBottomBorder"><h1 class="heading--trim"><a href="/blog/ramda-chops-safely-accessing-properties.html">Ramda Chops: Safely Accessing Properties</a></h1><small>Jan 31, 2018</small></header><p>One of the most prevalent causes of bugs I&#39;ve seen in latter-day JavaScript revolves around expectations with regards to data modeling. With the rise of <a href="https://reactjs.org/">react</a>, <a href="https://redux.js.org/">redux</a>, et al, many of us store our application state in an object whose keys and hierarchy can easily change, leaving us sometimes with or without values that were in fact expected: for example, <code>undefined is not a function</code> or trying to call <code>.map(...)</code> on a non-mappable data type (such as <code>null</code> or <code>undefined</code>). While there are any number of solutions for this issue that might even include diving into algebraic data types, the <a href="http://ramdajs.com">ramda library</a> library gives us a few helper methods that we can use right away to dig into our data structures and extract values:</p><ul><li><a href="http://ramdajs.com/docs/#prop"><code>prop</code></a></li><li><a href="http://ramdajs.com/docs/#propOr"><code>propOr</code></a></li><li><a href="http://ramdajs.com/docs/#path"><code>path</code></a></li><li><a href="http://ramdajs.com/docs/#pathOr"><code>pathOr</code></a></li></ul><h2><a class="heading--link" name="-code-prop-code-amp-code-propor-code-" href="#-code-prop-code-amp-code-propor-code-"><span><code>prop</code> &amp; <code>propOr</code></span></a></h2><p>What happens normally if you expect an array, try to access the third item (index position 2), but are actually provided <code>undefined</code> instead of an array?</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr = <span class="hljs-literal">undefined</span>
arr[<span class="hljs-number">2</span>] <span class="hljs-comment">// TypeError is thrown</span>
</code></pre><p>What happens if you try to access the <code>length</code> property on what you think should be an array but ends up being <code>null</code> or <code>undefined</code>?</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr = <span class="hljs-literal">null</span>
arr.length <span class="hljs-comment">// TypeError is thrown</span>
</code></pre><p>One solution is to do the &quot;value or default&quot; approach to keep the errors at bay:</p><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr = <span class="hljs-literal">undefined</span>
<span class="hljs-keyword">const</span> xs = arr || []
xs[<span class="hljs-number">2</span>] <span class="hljs-comment">// undefined</span>
xs.length <span class="hljs-comment">// 0</span>
</code></pre><p>An approach we could take to avoid the errors being thrown would be to use ramda&#39;s <a href="http://ramdajs.com/docs/#prop"><code>prop</code></a> helper:</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> prop <span class="hljs-keyword">from</span> <span class="hljs-string">'ramda/src/prop'</span>

<span class="hljs-keyword">const</span> arr = <span class="hljs-literal">undefined</span>
prop(<span class="hljs-number">2</span>, arr) <span class="hljs-comment">// undefined</span>
prop(<span class="hljs-string">'length'</span>, arr) <span class="hljs-comment">// undefined</span>
</code></pre><p><em>Ramda&#39;s <a href="http://ramdajs.com/docs/#length"><code>length</code></a> function would accomplish a similar goal for <code>prop(&#39;length&#39;)</code>.</em></p><p>But if we want a default to be returned in lieu of our data not being present, we can turn to <a href="http://ramdajs.com/docs/#propOr"><code>propOr</code></a>:</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> propOr <span class="hljs-keyword">from</span> <span class="hljs-string">'ramda/src/propOr'</span>

<span class="hljs-keyword">const</span> arr = <span class="hljs-literal">undefined</span>
propOr({}, <span class="hljs-number">2</span>, arr) <span class="hljs-comment">// {}</span>
propOr(<span class="hljs-number">0</span>, <span class="hljs-string">'length'</span>, arr) <span class="hljs-comment">// 0</span>
</code></pre><p>If you need to select multiple properties without fear, then the perhaps the <a href="http://ramdajs.com/docs/#props"><code>props</code></a> or <a href="http://ramdajs.com/docs/#pick"><code>pick</code></a> helpers may be for you.</p><h2><a class="heading--link" name="-code-path-code-amp-code-pathor-code-" href="#-code-path-code-amp-code-pathor-code-"><span><code>path</code> &amp; <code>pathOr</code></span></a></h2><p>What if we are working in a deeply nested data structure where multiple keys in our hierarchy may or may not exist? Enter <a href="http://ramdajs.com/docs/#path"><code>path</code></a> and <a href="http://ramdajs.com/docs/#pathOr"><code>pathOr</code></a>. These work similarly to <code>prop</code> and <code>propOr</code> except that they use an array syntax to dive into data structures and ultimately check for a <em>value</em>, whereas the <code>prop</code> family checks for a property&#39;s presence.</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'ramda/src/path'</span>

<span class="hljs-keyword">const</span> data = {
  <span class="hljs-attr">courses</span>: {
    <span class="hljs-string">'abc123'</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'How To Build a Tiny House'</span>,
      <span class="hljs-attr">dueAt</span>: <span class="hljs-string">'2018-01-30'</span>
    }
  }
}

<span class="hljs-comment">// getCourseTitle :: String -&gt; String | undefined</span>
<span class="hljs-keyword">const</span> getCourseTitle = <span class="hljs-function"><span class="hljs-params">courseId</span> =&gt;</span>
  path([<span class="hljs-string">'courses'</span>, courseId, <span class="hljs-string">'title'</span>])

getCourseTitle(<span class="hljs-string">'abc123'</span>)(data) <span class="hljs-comment">// "How To Build a Tiny House"</span>
getCourseTitle(<span class="hljs-string">'def456'</span>)(data) <span class="hljs-comment">// undefined</span>
</code></pre><p><em><a href="https://goo.gl/u8qVXy">Try this code in the ramda REPL</a></em></p><p>Or if we&#39;d always like to default to a default, we can use <code>pathOr</code>:</p><pre><code class="hljs js"><span class="hljs-keyword">import</span> pathOr <span class="hljs-keyword">from</span> <span class="hljs-string">'ramda/src/path'</span>

<span class="hljs-keyword">const</span> data = {
  <span class="hljs-attr">courses</span>: {
    <span class="hljs-string">'abc123'</span>: {
      <span class="hljs-attr">title</span>: <span class="hljs-string">'How To Build a Tiny House'</span>,
      <span class="hljs-attr">dueAt</span>: <span class="hljs-string">'2018-01-30'</span>
    }
  }
}

<span class="hljs-comment">// getCourseTitle :: String -&gt; String</span>
<span class="hljs-keyword">const</span> getCourseTitle = <span class="hljs-function"><span class="hljs-params">courseId</span> =&gt;</span>
  pathOr(<span class="hljs-string">'My Course'</span>, [<span class="hljs-string">'courses'</span>, courseId, <span class="hljs-string">'title'</span>])

getCourseTitle(<span class="hljs-string">'abc123'</span>)(data) <span class="hljs-comment">// "How To Build a Tiny House"</span>
getCourseTitle(<span class="hljs-string">'def456'</span>)(data) <span class="hljs-comment">// "My Course"</span>
</code></pre><p><em><a href="https://goo.gl/dPC9FK">Try this code in the ramda REPL</a></em></p><hr><p>As I said before, there are <em>many</em> different ways to solve this problem, but I&#39;ve found the <code>propOr</code> and <code>pathOr</code> family of ramda helpers to be a great starting point.</p><p>Until next time,<br>Robert</p></div></article><section class="section--padded bg--gray"><div class="layout--constrained"><h2>Get notified of new posts</h2><!-- Begin MailChimp Signup Form --><form action="//robertwpearce.us13.list-manage.com/subscribe/post?u=2df44e8960266388bff165fa6&amp;id=ee2f2a3737" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate class="form"><div id="mce-responses"><div class="response" id="mce-error-response" style="display:none"></div><div class="response" id="mce-success-response" style="display:none"></div></div><div style="position: absolute; left: -5000px" aria-hidden="true"><input type="text" name="b_2df44e8960266388bff165fa6_ee2f2a3737" tabindex="-1" value=""></div><div class="form__container"><label for="mce-EMAIL" class="form__label">Email Address</label><input type="email" value="" id="mce-EMAIL" class="form__input" name="EMAIL" placeholder="you@greatemail.com"> <input type="submit" value="Subscribe" name="subscribe" class="form__submit"></div><small>Note: I will <em>never</em> give out your email nor spam you. Unsubscribe at any time.</small></form><!--End mc_embed_signup--></div></section></main></body></html>