<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Catch Low-Hanging Accessibility Fruit with axe-core</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Automate away easy-to-catch accessibility issues">
    <meta name="author" content="Robert Pearce">
    <meta name="keywords" content="javascript, accessibility, a11y, testing, axe-core">
    <meta name="google-site-verification" content="QX4bn65yOXBfgnwxlO09yIBc1H8blur-Erx3lmsDVhU">

    <meta property="og:site_name" content="Robert Pearce | Senior Software Developer">
    <meta property="og:title" content="Catch Low-Hanging Accessibility Fruit with axe-core">
    <meta property="og:url" content="https://robertwpearce.com/catch-low-hanging-accessibility-fruit-with-axe-core.html">
    <meta property="og:description" content="Automate away easy-to-catch accessibility issues">
    <meta property="og:image" content="https://robertwpearce.com/images/near-milford-sound.jpg">
    
      <meta property="og:type" content="article">
    

    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:site" content="Robert Pearce | Senior Software Developer">
    <meta property="twitter:title" content="Catch Low-Hanging Accessibility Fruit with axe-core">
    <meta property="twitter:description" content="Automate away easy-to-catch accessibility issues">
    <meta property="twitter:image" content="https://robertwpearce.com/images/near-milford-sound.jpg">
    <meta property="twitter:creator" content="@RobertWPearce">

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="canonical" href="https://robertwpearce.com/catch-low-hanging-accessibility-fruit-with-axe-core.html">
    <link rel="stylesheet" href="/css/default.css" />
    
      <link rel="stylesheet" href="/css/article.css" />
    
  </head>
  <body class="light">
    <nav class="nav">
  <div class="layout--constrained" data-nav-wrap>
    <a class="nav__link nav__skip" href="#content">Skip to content</a>
    <a class="nav__link" href="/">Home</a>
    <a class="nav__link" href="mailto:me@robertwpearce.com?subject=Work Inquiry">Hire Me</a>
    <a class="nav__link" href="/atom.xml">atom</a>
    <a class="nav__link" href="/rss.xml">rss</a>
  </div>
</nav>


<main id="content" tabindex="-1">
  <article class="article">
    <header class="article__bg" style="background-image: url('/images/near-milford-sound.jpg')">
      <div class="article__bgHeader">
        <div class="layout--constrained">
          <div class="article__bgTitleWrap">
            <h1 class="article__bgTitle">
              <a href="/catch-low-hanging-accessibility-fruit-with-axe-core.html">Catch Low-Hanging Accessibility Fruit with axe-core</a>
            </h1>
            <div class="article__bgSubHeader">
              <small class="italic">2020-02-24</small>
              
              
              <small class="article__bgPhotoCred italic">
                [ photo credit <a href="https://www.instagram.com/emilycouldmakethat">emilycouldmakethat</a> ]
              </small>
              
            </div>
          </div>
        </div>
      </div>
    </header>
    <section class="layout--constrained">
      <header class="article__header">
        <h1 class="article__title">
          <a href="/catch-low-hanging-accessibility-fruit-with-axe-core.html">Catch Low-Hanging Accessibility Fruit with axe-core</a>
        </h1>
        <small class="italic">2020-02-24</small>
        
      </header>
      <p><a href="https://www.deque.com">Deque Systems</a>, in addition to having <a href="https://www.deque.com/axe/axe-for-web/">an accessibility-testing browser plugin</a>, has an open source package, <a href="https://www.npmjs.com/package/axe-core">axe-core</a>, that can help you determine if HTML contains obvious accessibility issues.</p>
<p>That tool can be used on its own in your tests, or you can turn it into a <code>Promise</code> and use it like this!</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="im">import</span> axe <span class="im">from</span> <span class="st">&#39;axe-core&#39;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true"></a><span class="kw">const</span> isA11y <span class="op">=</span> html <span class="kw">=&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true"></a>  <span class="kw">new</span> <span class="bu">Promise</span>((resolve<span class="op">,</span> reject) <span class="kw">=&gt;</span> {</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true"></a>    axe<span class="op">.</span><span class="fu">run</span>(html<span class="op">,</span> {}<span class="op">,</span> (err<span class="op">,</span> result<span class="op">=</span>{}) <span class="kw">=&gt;</span> {</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true"></a>      <span class="kw">const</span> { violations<span class="op">=</span>[] } <span class="op">=</span> result</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true"></a>      <span class="cf">if</span> (err) {</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true"></a>        <span class="fu">reject</span>(err)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true"></a>      } <span class="cf">else</span> <span class="cf">if</span> (violations<span class="op">.</span><span class="at">length</span> <span class="op">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true"></a>        <span class="fu">reject</span>(violations)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true"></a>      } <span class="cf">else</span> {</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true"></a>        <span class="co">// Uncomment to view incomplete/unavailable tests &amp; why</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true"></a>        <span class="co">//console.log(result.incomplete)</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true"></a>        <span class="fu">resolve</span>(<span class="kw">true</span>)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true"></a>      }</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true"></a>    })</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true"></a>  })</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true"></a><span class="fu">test</span>(<span class="st">&#39;bad form&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true"></a>  <span class="kw">const</span> wrap <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">&#39;div&#39;</span>)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true"></a>  wrap<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true"></a><span class="vs">    &lt;form&gt;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true"></a><span class="vs">      &lt;div&gt;Enter your name&lt;/div&gt;</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true"></a><span class="vs">      &lt;input type=&quot;text&quot; /&gt;</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true"></a><span class="vs">      &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true"></a><span class="vs">    &lt;/form&gt;</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true"></a><span class="vs">  `</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true"></a>  <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">.</span><span class="fu">appendChild</span>(wrap)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true"></a>  <span class="fu">expect</span>(<span class="cf">await</span> <span class="fu">isA11y</span>(wrap))<span class="op">.</span><span class="fu">toEqual</span>(<span class="kw">true</span>)</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true"></a>})</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true"></a><span class="co">// Failed: Array [</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true"></a><span class="co">//   Object {</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true"></a><span class="co">//     &quot;description&quot;: &quot;Ensures every form element has a label&quot;,</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true"></a><span class="co">//     &quot;help&quot;: &quot;Form elements must have labels&quot;,</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true"></a><span class="co">//     &quot;helpUrl&quot;: &quot;https://dequeuniversity.com/rules/axe/3.5/label?application=axeAPI&quot;,</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true"></a><span class="co">//     &quot;id&quot;: &quot;label&quot;,</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true"></a><span class="co">//     &quot;impact&quot;: &quot;critical&quot;,</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true"></a><span class="co">//     &quot;nodes&quot;: Array [</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true"></a><span class="co">//       [Object],</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true"></a><span class="co">//     ],</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true"></a><span class="co">//     &quot;tags&quot;: Array [</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true"></a><span class="co">//       &quot;cat.forms&quot;,</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true"></a><span class="co">//       &quot;wcag2a&quot;,</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true"></a><span class="co">//       &quot;wcag332&quot;,</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true"></a><span class="co">//       &quot;wcag131&quot;,</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true"></a><span class="co">//       &quot;section508&quot;,</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true"></a><span class="co">//       &quot;section508.22.n&quot;</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true"></a><span class="co">//     ],</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true"></a><span class="co">//   }</span></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true"></a><span class="co">//  ]</span></span></code></pre></div>
<p>It can detect all sorts of accessibility issues, so long as the environment in which it’s being tested supports the browser features used in <code>axe-core</code>’s tests. For example, <code>jsdom</code>, which <code>jest</code> uses as its browser mocking engine, <a href="https://github.com/jsdom/jsdom/pull/2719">only recently added some support for <code>Range</code></a>, it seems there are still some aspects missing, and this prevents <code>axe-core</code> from being able to test things like the accessibility of text color on certain backgrounds.</p>
<p>That said, the sheer number of issues that can be caught with this tool is staggering. If you work with tools like React and combine this with Deque’s <a href="https://github.com/dequelabs/react-axe"><code>react-axe</code></a> tool and <a href="https://github.com/evcohen/eslint-plugin-jsx-a11y"><code>eslint-plugin-jsx-a11y</code></a>, you are sure to catch heaps of issues you might accidentally overlook. Note, however, that these tools are not replacements for real accessibility testing.</p>
<p>Here is an example in a real OSS project of mine that uses this <code>axe-core</code> technique with <code>@testing-library/react</code>: <a href="https://github.com/rpearce/react-medium-image-zoom/blob/6721f87370d968361d9d0d14cd30d752832877d1/__tests__/Uncontrolled.js#L27" class="uri">https://github.com/rpearce/react-medium-image-zoom/blob/6721f87370d968361d9d0d14cd30d752832877d1/__tests__/Uncontrolled.js#L27</a>.</p>
<hr />
<p>If you are using <code>jest</code> and want a custom matcher, there is a project, <a href="https://github.com/nickcolley/jest-axe"><code>jest-axe</code></a>, that allows you to do so:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="co">// from https://github.com/nickcolley/jest-axe#usage</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="kw">const</span> { axe<span class="op">,</span> toHaveNoViolations } <span class="op">=</span> <span class="pp">require</span>(<span class="st">&#39;jest-axe&#39;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a>expect<span class="op">.</span><span class="fu">extend</span>(toHaveNoViolations)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a><span class="fu">it</span>(<span class="st">&#39;should demonstrate this matcher`s usage&#39;</span><span class="op">,</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>  <span class="kw">const</span> render <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="st">&#39;&lt;img src=&quot;#&quot;/&gt;&#39;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a>  <span class="co">// pass anything that outputs html to axe</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a>  <span class="kw">const</span> html <span class="op">=</span> <span class="fu">render</span>()</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>  <span class="fu">expect</span>(<span class="cf">await</span> <span class="fu">axe</span>(html))<span class="op">.</span><span class="fu">toHaveNoViolations</span>()</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a>})</span></code></pre></div>
<hr />
<p>Thank you for reading! <br /> Robert</p>
    </section>
  </article>
</main>

<footer>
  <section class="subscribe section--padded">
  <div class="layout--constrained">
    <h2 class="subscribe__header">Get notified of new posts</h2>

    <form action="//robertwpearce.us13.list-manage.com/subscribe/post?u=2df44e8960266388bff165fa6&amp;id=ee2f2a3737" method="post" name="mc-embedded-subscribe-form" target="_blank" novalidate class="subscribe__form">
      <div style="position: absolute; left: -5000px;" aria-hidden="true">
        <input type="text" name="b_2df44e8960266388bff165fa6_ee2f2a3737" tabindex="-1" value="">
      </div>
      <div class="subscribe__section">
        <input type="email" value="" id="mce-EMAIL" class="subscribe__input" name="EMAIL" placeholder="you@greatemail.com" aria-label="Email Address">
        <input type="submit" value="Subscribe" name="subscribe" class="subscribe__submit">
      </div>
      <small>Note: I will <em>never</em> give out your email nor spam you. Unsubscribe at any time.</small>
    </form>
    <p>
      <small>(or subscribe to the <a href="/atom.xml" class="subscribe__link">atom</a> or <a class="subscribe__link" href="/rss.xml">rss</a> feeds)</small>
    </p>
  </div>
</section>

</footer>

    <script async src="/js/dist/index.js"></script>
  </body>
</html>
