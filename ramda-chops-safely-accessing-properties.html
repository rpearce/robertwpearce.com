<!DOCTYPE html><html lang="en"><head><title>Ramda Chops: Safely Accessing Properties</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="description" content="Get introduced to ramda's prop, propOr, path & pathOr functions."><meta name="author" content="Robert Pearce"><meta name="keywords" content="ramda, ramda.js, ramdajs, ramda tutorial, ramda prop, ramda propOr, ramda path, ramda pathOr, ramda fp"><meta name="google-site-verification" content="QX4bn65yOXBfgnwxlO09yIBc1H8blur-Erx3lmsDVhU"><meta http-equiv="origin-trial" content="Am4BZ0c7GMyB72dgo/Ny2FfIFscXhYMoN+CVe4jduWh24FvsaCwf7kjZzHzfrJXtIilyZVAEKRxOItGLY7lvkAgAAABSeyJvcmlnaW4iOiJodHRwczovL3JvYmVydHdwZWFyY2UuY29tOjQ0MyIsImZlYXR1cmUiOiJQb3J0YWxzIiwiZXhwaXJ5IjoxNjAzNTQ2NDc3fQ=="><meta property="og:site_name" content="Robert Pearce"><meta property="og:title" content="Ramda Chops: Safely Accessing Properties"><meta property="og:url" content="https://robertwpearce.com/ramda-chops-safely-accessing-properties.html"><meta property="og:description" content="Get introduced to ramda's prop, propOr, path & pathOr functions."><meta property="og:type" content="article"><meta property="twitter:site" content="Robert Pearce"><meta property="twitter:title" content="Ramda Chops: Safely Accessing Properties"><meta property="twitter:description" content="Get introduced to ramda's prop, propOr, path & pathOr functions."><meta property="twitter:creator" content="@RobertWPearce"><link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üíæ</text></svg>"><link rel="canonical" href="https://robertwpearce.com/ramda-chops-safely-accessing-properties.html"><link rel="alternate" href="./atom.xml" title="Robert Pearce's blog" type="application/atom+xml"><link rel="alternate" href="./rss.xml" title="Robert Pearce's blog" type="application/rss+xml"><link rel="stylesheet" href="./css/base.css"><link rel="stylesheet" href="./css/t-clean.css"><link rel="stylesheet" href="./css/t-clean-note.css"><link rel="stylesheet" href="./css/t-code-dracula.css"><link rel="prefetch" href="./css/t-clean-note.css"></head><body data-theme="clean-night"><script> (() => { window.site = { prefFont: localStorage.getItem('prefFont') || 'monospace', setFont: (family) => { localStorage.setItem('prefFont', family); const rootStyle = document.querySelector(':root').style; rootStyle.setProperty('--type-family-body', family+',monospace'); /* Remove when https://github.com/googlefonts/spacemono/pull/2 is resolved */ if (family === 'Liga Space Mono') { rootStyle.setProperty('font-feature-settings', '"liga" 0'); } else { rootStyle.removeProperty('font-feature-settings'); } return window.site._fetchFont(family); }, prefTheme: localStorage.getItem('prefTheme') || (matchMedia('(prefers-color-scheme: dark)').matches ? 'clean-night' : 'clean-day'), setTheme: (name) => { const rootStyle = document.querySelector(':root').style; if (name === 'clean-night') { rootStyle.removeProperty('color-scheme'); } else { rootStyle.setProperty('color-scheme', 'light'); } document.body.setAttribute('data-theme', name); localStorage.setItem('prefTheme', name); }, _fetchFont: (family) => { if (family === 'monospace') { return Promise.resolve(); } const familyNoSpaces = family.replaceAll(' ', ''); const fontz = [ new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Regular.woff2") format("woff2")', { display: 'swap', weight: 400 }), new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Bold.woff2") format("woff2")', { display: 'swap', weight: 700 }), ]; if (family !== 'Fira Code') { fontz.push( new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-Italic.woff2") format("woff2")', { display: 'swap', style: 'italic', weight: 400 }), new FontFace(family, 'url("./fonts/'+familyNoSpaces+'-BoldItalic.woff2") format("woff2")', { display: 'swap', style: 'italic', weight: 700 }) ); } for (const f of fontz) { document.fonts.add(f); } return Promise.allSettled(fontz).then(results => { results.forEach((res, i) => { if (res.status === 'rejected') { console.error('site failed to load font: ' + fontz[i]?.family ?? 'unknown'); } }); }); } }; window.site.setTheme(window.site.prefTheme); window.site.setFont(window.site.prefFont); })(); </script><header><nav><div class="nav-skip"><a href="#content">Skip to content</a></div><a aria-label="Home" class="nav-home" href="./">~</a><span>/</span></nav><div class="header-extra"><a href="./atom.xml">RSS</a><span aria-hidden="true">&compfn;</span><noscript>(requires JS &rarr;)</noscript><label for="select-theme">Theme</label><select data-select-theme id="select-theme"><option value="clean-day">Clean (Day)</option><option value="clean-night">Clean (Night)</option></select><span aria-hidden="true">&compfn;</span><label for="select-font">Font</label><select data-select-font id="select-font"><option value="monospace">monospace</option><option value="Liga Space Mono">Space Mono</option><option value="Victor Mono">Victor Mono</option><option value="Fira Code">Fira Code</option><option value="JetBrains Mono">JetBrains Mono</option></select></div></header><main id="content"><header data-area="heading"><h1>Ramda Chops: Safely Accessing Properties</h1></header><section data-area="meta"><h2>Info</h2><table data-type="cols-y"><tbody><tr><th>Summary</th><td>Get introduced to ramda's prop, propOr, path & pathOr functions.</td></tr><tr><th>Shared</th><td>2018-01-31</td></tr></tbody></table></section><section data-area="note"><p><em>Thanks to <a href="https://twitter.com/joshsloat">@joshsloat</a> and <a href="https://twitter.com/zerkms">@zerkms</a> for their review of this post.</em></p><p>One of the most prevalent causes of bugs I‚Äôve seen in latter-day JavaScript revolves around expectations with regard to data modeling. With the rise of <a href="https://reactjs.org/">react</a>, <a href="https://redux.js.org/">redux</a>, et al, many of us store our application state in an object whose keys and hierarchy can easily change, leaving us sometimes with or without values that were in fact expected: for example, <code>undefined is not a function</code> or trying to call <code>.map(...)</code> on a non-mappable data type (such as <code>null</code> or <code>undefined</code>). While there are any number of solutions for this issue that might even include diving into algebraic data types, the <a href="http://ramdajs.com">ramda library</a> gives us a few helper methods that we can use right away to dig into our data structures and extract values:</p><ul><li><a href="http://ramdajs.com/docs/#prop"><code>prop</code></a></li><li><a href="http://ramdajs.com/docs/#propOr"><code>propOr</code></a></li><li><a href="http://ramdajs.com/docs/#path"><code>path</code></a></li><li><a href="http://ramdajs.com/docs/#pathOr"><code>pathOr</code></a></li></ul><hr /><p><em>Other ramda posts:</em></p><ul><li><a href="/ramda-chops-function-currying.html">Ramda Chops: Function Currying</a></li><li><a href="/ramda-chops-function-composition.html">Ramda Chops: Function Composition</a></li><li><a href="/ramda-chops-map-filter-and-reduce.html">Ramda Chops: Map, Filter &amp; Reduce</a></li></ul><h2 id="prop--propor"><code>prop</code> &amp; <code>propOr</code></h2><p>What happens normally if you expect an array, try to access the third item (index position 2), but are actually provided <code>undefined</code> instead of an array?</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">arr</span> <span class="pl-o">=</span> <span class="pl-kc">undefined</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">arr</span><span class="pl-p">[</span><span class="pl-mi">2</span><span class="pl-p">]</span> <span class="pl-c1">// TypeError is thrown
</span></span></span></code></pre><p>What happens if you try to access the <code>length</code> property on what you think should be an array but ends up being <code>null</code> or <code>undefined</code>?</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">arr</span> <span class="pl-o">=</span> <span class="pl-kc">null</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">arr</span><span class="pl-p">.</span><span class="pl-nx">length</span> <span class="pl-c1">// TypeError is thrown
</span></span></span></code></pre><p>One solution is to do the ‚Äúvalue or default‚Äù approach to keep the errors at bay:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">arr</span> <span class="pl-o">=</span> <span class="pl-kc">undefined</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">xs</span> <span class="pl-o">=</span> <span class="pl-nx">arr</span> <span class="pl-o">||</span> <span class="pl-p">[]</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">xs</span><span class="pl-p">[</span><span class="pl-mi">2</span><span class="pl-p">]</span> <span class="pl-c1">// undefined
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-nx">xs</span><span class="pl-p">.</span><span class="pl-nx">length</span> <span class="pl-c1">// 0
</span></span></span></code></pre><p>An approach we could take to avoid the errors being thrown would be to use ramda‚Äôs <a href="http://ramdajs.com/docs/#prop"><code>prop</code></a> helper:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">import</span> <span class="pl-nx">prop</span> <span class="pl-nx">from</span> <span class="pl-s1">'ramda/src/prop'</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">arr</span> <span class="pl-o">=</span> <span class="pl-kc">undefined</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">prop</span><span class="pl-p">(</span><span class="pl-mi">2</span><span class="pl-p">,</span> <span class="pl-nx">arr</span><span class="pl-p">)</span> <span class="pl-c1">// undefined
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-nx">prop</span><span class="pl-p">(</span><span class="pl-s1">'length'</span><span class="pl-p">,</span> <span class="pl-nx">arr</span><span class="pl-p">)</span> <span class="pl-c1">// undefined
</span></span></span></code></pre><p><em>Ramda‚Äôs <a href="http://ramdajs.com/docs/#length"><code>length</code></a> function would accomplish a similar goal for <code>prop('length')</code>.</em></p><p>But if we want a default to be returned in lieu of our data not being present, we can turn to <a href="http://ramdajs.com/docs/#propOr"><code>propOr</code></a>:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">import</span> <span class="pl-nx">propOr</span> <span class="pl-nx">from</span> <span class="pl-s1">'ramda/src/propOr'</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">arr</span> <span class="pl-o">=</span> <span class="pl-kc">undefined</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">propOr</span><span class="pl-p">({},</span> <span class="pl-mi">2</span><span class="pl-p">,</span> <span class="pl-nx">arr</span><span class="pl-p">)</span> <span class="pl-c1">// {}
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-nx">propOr</span><span class="pl-p">(</span><span class="pl-mi">0</span><span class="pl-p">,</span> <span class="pl-s1">'length'</span><span class="pl-p">,</span> <span class="pl-nx">arr</span><span class="pl-p">)</span> <span class="pl-c1">// 0
</span></span></span></code></pre><p>If you need to select multiple properties without fear, then the <a href="http://ramdajs.com/docs/#props"><code>props</code></a> or <a href="http://ramdajs.com/docs/#pick"><code>pick</code></a> functions may be for you.</p><h2 id="path--pathor"><code>path</code> &amp; <code>pathOr</code></h2><p>What if we are working in a deeply nested data structure where multiple keys in our hierarchy may or may not exist? Enter <a href="http://ramdajs.com/docs/#path"><code>path</code></a> and <a href="http://ramdajs.com/docs/#pathOr"><code>pathOr</code></a>. These work similarly to <code>prop</code> and <code>propOr</code> except that they use an array syntax to dive into data structures and ultimately check for a <em>value</em>, whereas the <code>prop</code> family checks for a property‚Äôs presence.</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">import</span> <span class="pl-nx">path</span> <span class="pl-nx">from</span> <span class="pl-s1">'ramda/src/path'</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">data</span> <span class="pl-o">=</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">courses</span><span class="pl-o">:</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-nx">abc123</span><span class="pl-o">:</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-nx">title</span><span class="pl-o">:</span> <span class="pl-s1">'How To Build a Tiny House'</span><span class="pl-p">,</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-nx">dueAt</span><span class="pl-o">:</span> <span class="pl-s1">'2018-01-30'</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// getCourseTitle :: String -&gt; String | undefined
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-kr">const</span> <span class="pl-nx">getCourseTitle</span> <span class="pl-o">=</span> <span class="pl-nx">courseId</span> <span class="pl-p">=&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">path</span><span class="pl-p">([</span><span class="pl-s1">'courses'</span><span class="pl-p">,</span> <span class="pl-nx">courseId</span><span class="pl-p">,</span> <span class="pl-s1">'title'</span><span class="pl-p">])</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">getCourseTitle</span><span class="pl-p">(</span><span class="pl-s1">'abc123'</span><span class="pl-p">)(</span><span class="pl-nx">data</span><span class="pl-p">)</span> <span class="pl-c1">// "How To Build a Tiny House"
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-nx">getCourseTitle</span><span class="pl-p">(</span><span class="pl-s1">'def456'</span><span class="pl-p">)(</span><span class="pl-nx">data</span><span class="pl-p">)</span> <span class="pl-c1">// undefined
</span></span></span></code></pre><p><em><a href="https://goo.gl/fdujHu">Try this code in the ramda REPL</a></em></p><p>Or if we‚Äôd always like to default to a value, we can use <code>pathOr</code>:</p><pre class="pl-chroma"><code><span class="pl-line"><span class="pl-cl"><span class="pl-kr">import</span> <span class="pl-nx">pathOr</span> <span class="pl-nx">from</span> <span class="pl-s1">'ramda/src/path'</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-kr">const</span> <span class="pl-nx">data</span> <span class="pl-o">=</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">courses</span><span class="pl-o">:</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-nx">abc123</span><span class="pl-o">:</span> <span class="pl-p">{</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-nx">title</span><span class="pl-o">:</span> <span class="pl-s1">'How To Build a Tiny House'</span><span class="pl-p">,</span>
</span></span><span class="pl-line"><span class="pl-cl">      <span class="pl-nx">dueAt</span><span class="pl-o">:</span> <span class="pl-s1">'2018-01-30'</span>
</span></span><span class="pl-line"><span class="pl-cl">    <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-p">}</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1">// getCourseTitle :: String -&gt; String
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-kr">const</span> <span class="pl-nx">getCourseTitle</span> <span class="pl-o">=</span> <span class="pl-nx">courseId</span> <span class="pl-p">=&gt;</span>
</span></span><span class="pl-line"><span class="pl-cl">  <span class="pl-nx">pathOr</span><span class="pl-p">(</span><span class="pl-s1">'My Course'</span><span class="pl-p">,</span> <span class="pl-p">[</span><span class="pl-s1">'courses'</span><span class="pl-p">,</span> <span class="pl-nx">courseId</span><span class="pl-p">,</span> <span class="pl-s1">'title'</span><span class="pl-p">])</span>
</span></span><span class="pl-line"><span class="pl-cl">
</span></span><span class="pl-line"><span class="pl-cl"><span class="pl-nx">getCourseTitle</span><span class="pl-p">(</span><span class="pl-s1">'abc123'</span><span class="pl-p">)(</span><span class="pl-nx">data</span><span class="pl-p">)</span> <span class="pl-c1">// "How To Build a Tiny House"
</span></span></span><span class="pl-line"><span class="pl-cl"><span class="pl-c1"></span><span class="pl-nx">getCourseTitle</span><span class="pl-p">(</span><span class="pl-s1">'def456'</span><span class="pl-p">)(</span><span class="pl-nx">data</span><span class="pl-p">)</span> <span class="pl-c1">// "My Course"
</span></span></span></code></pre><p><em><a href="https://goo.gl/PXD1ju">Try this code in the ramda REPL</a></em></p><hr /><p>As I said before, there are <em>many</em> different ways to solve this problem, but I‚Äôve found the <code>propOr</code> and <code>pathOr</code> family of ramda functions to be a great starting point.</p><p>Until next time, <br /> Robert</p></section></main><footer><span aria-hidden="true" class="heart">‚ô•</span><span aria-hidden="true">&rarr;</span><a href="https://github.com/sponsors/rpearce/">Sponsor my work</a><span aria-hidden="true">&larr;</span><span aria-hidden="true" class="heart">‚ô•</span></footer><script async> (() => { const themeEl = document.querySelector('[data-select-theme]'); if (themeEl) { themeEl.querySelector('[value="'+window.site.prefTheme+'"]').selected = 'selected'; themeEl.addEventListener('change', e => { window.site.setTheme(e.target.value); }); } const fontEl = document.querySelector('[data-select-font]'); if (fontEl) { fontEl.querySelector('[value="'+window.site.prefFont+'"]').selected = 'selected'; fontEl.addEventListener('change', e => { window.site.setFont(e.target.value); }) } })(); </script></body></html>